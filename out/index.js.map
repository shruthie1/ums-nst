{"version":3,"file":"index.js","mappings":";;;;;;;;;;;;;;;;;;;;;;;;;AAAA,6EAA+G;AAC/G,uFAA2C;AAC3C,gFAAsG;AAMtG,8FAA+C;AAGxC,IAAM,aAAa,GAAnB,MAAM,aAAa;IACxB,YAA6B,UAAsB;QAAtB,eAAU,GAAV,UAAU,CAAY;IAAI,CAAC;IAGxD,QAAQ;QACN,OAAO,IAAI,CAAC,UAAU,CAAC,QAAQ,EAAE,CAAC;IACpC,CAAC;IAGK,KAAD,CAAC,YAAY,CACA,QAAgB,EAAE,EACnB,OAAe,EAAE;QAChC,OAAO,MAAM,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,KAAK,EAAE,IAAI,CAAC;IACxD,CAAC;IAGK,KAAD,CAAC,YAAY,CAAgB,IAAY;QAC5C,OAAO,MAAM,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,IAAI,CAAC;IACjD,CAAC;IAGK,KAAD,CAAC,cAAc,CAAgB,IAAY;QAC9C,OAAO,MAAM,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC,IAAI,CAAC;IACnD,CAAC;IAMK,KAAD,CAAC,YAAY,CAAkB,MAAc;QAChD,OAAO,IAAI,CAAC,UAAU,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;IAC9C,CAAC;IAOK,KAAD,CAAC,gBAAgB,CAAkB,MAAc,EAAU,YAAiB;QAC/E,MAAM,IAAI,CAAC,UAAU,CAAC,gBAAgB,CAAC,MAAM,EAAE,YAAY,CAAC,CAAC;QAC7D,OAAO,IAAI,CAAC;IACd,CAAC;IAMK,KAAD,CAAC,eAAe,CAAkB,MAAc;QACnD,OAAO,IAAI,CAAC,UAAU,CAAC,eAAe,CAAC,MAAM,CAAC,CAAC;IACjD,CAAC;IAGK,KAAD,CAAC,eAAe,CAAkB,MAAc,EAAoB,OAAe;QACtF,OAAO,IAAI,CAAC,UAAU,CAAC,eAAe,CAAC,MAAM,EAAE,OAAO,CAAC,CAAC;IAC1D,CAAC;IAOK,KAAD,CAAC,aAAa,CACH,OAAe,EACZ,MAAc,EACf,KAAa;QAE7B,IAAI,CAAC;YACH,IAAI,OAAO,CAAC,MAAM,GAAG,IAAI,EAAE,CAAC;gBAC1B,OAAO,MAAM,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,MAAM,EAAE,KAAK,EAAE,OAAO,CAAC,CAAC;YACrE,CAAC;iBAAM,CAAC;gBACN,OAAO,CAAC,GAAG,CAAC,kBAAkB,EAAE,kBAAkB,CAAC,OAAO,CAAC,CAAC;gBAC5D,OAAO,MAAM;YACf,CAAC;QACH,CAAC;QAAC,OAAO,CAAC,EAAE,CAAC;YACX,kCAAU,EAAC,CAAC,CAAC,CAAC;QAChB,CAAC;IACH,CAAC;IAKK,KAAD,CAAC,SAAS,CAAiB,KAAa;QAC3C,IAAI,CAAC;YACH,MAAM,eAAe,GAAG,kBAAkB,CAAC,KAAK,CAAC,CAAC;YAClD,IAAI,CAAC,UAAU,CAAC,SAAS,CAAC,eAAe,CAAC,CAAC;YAC3C,OAAO,QAAQ,KAAK,EAAE;QACxB,CAAC;QAAC,OAAO,CAAC,EAAE,CAAC;YACX,kCAAU,EAAC,CAAC,CAAC,CAAC;YACd,MAAM,CAAC,CAAC;QACV,CAAC;IACH,CAAC;IAIK,KAAD,CAAC,4BAA4B;QAChC,OAAO,IAAI,CAAC,UAAU,CAAC,qBAAqB,EAAE,CAAC;IACjD,CAAC;IAIK,KAAD,CAAC,UAAU;QACd,OAAO,MAAM,IAAI,CAAC,UAAU,CAAC,UAAU,EAAE,CAAC;IAC5C,CAAC;IAKK,KAAD,CAAC,SAAS,CAAU,KAAa;QACpC,OAAO,MAAM,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC;IACpD,CAAC;IAIK,KAAD,CAAC,UAAU,CAAU,KAAa;QACrC,OAAO,MAAM,IAAI,CAAC,UAAU,CAAC,UAAU,CAAC,KAAK,CAAC,CAAC;IACjD,CAAC;IAOK,KAAD,CAAC,WAAW,CAAoB,QAAgB,EAAmB,MAAc;QACpF,OAAO,MAAM,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC,QAAQ,EAAE,MAAM,CAAC,CAAC;IAChE,CAAC;IAKK,KAAD,CAAC,cAAc;QAClB,IAAI,CAAC,UAAU,CAAC,cAAc,EAAE,CAAC;QACjC,OAAO,GAAG,CAAC;IACb,CAAC;IAGK,KAAD,CAAC,gBAAgB;QACpB,IAAI,CAAC,UAAU,CAAC,gBAAgB,EAAE,CAAC;QACnC,OAAO,GAAG,CAAC;IACb,CAAC;IAKK,KAAD,CAAC,WAAW;QACf,IAAI,CAAC,UAAU,CAAC,WAAW,EAAE,CAAC;QAC9B,OAAO,GAAG,CAAC;IACb,CAAC;IAGK,KAAD,CAAC,aAAa;QACjB,IAAI,CAAC,UAAU,CAAC,aAAa,EAAE,CAAC;QAChC,OAAO,GAAG,CAAC;IACb,CAAC;IAGD,IAAI;QACF,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC;IACjB,CAAC;IAQK,KAAD,CAAC,UAAU,CAAmB,OAAe,EAAqB,QAAgB,EAAmB,MAAW;QACnH,OAAO,MAAM,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,OAAO,EAAE,QAAQ,EAAE,MAAM,CAAC,CAAC;IACtE,CAAC;IAQK,KAAD,CAAC,aAAa,CAAmB,OAAe,EAAqB,QAAgB,EAAU,IAAS;QAC3G,OAAO,MAAM,IAAI,CAAC,UAAU,CAAC,cAAc,CAAC,OAAO,EAAE,QAAQ,EAAE,IAAI,CAAC,CAAC;IACvE,CAAC;IAMK,KAAD,CAAC,gBAAgB,CAAU,MAAW,EAAU,IAAS;QAC5D,MAAM,IAAI,KAAK,CAAC,wBAAwB,CAAC;IAE3C,CAAC;IAKK,KAAD,CAAC,aAAa,CAAU,MAAW;QACtC,OAAO,MAAM,IAAI,CAAC,UAAU,CAAC,aAAa,CAAC,MAAM,CAAC,CAAC;IACrD,CAAC;IAKK,KAAD,CAAC,YAAY;QAChB,OAAO,MAAM,IAAI,CAAC,UAAU,CAAC,YAAY,EAAE,CAAC;IAC9C,CAAC;IAOK,KAAD,CAAC,gBAAgB,CAAkB,MAAc,EAAoB,OAAe,EAAU,IAAS;QAC1G,OAAO,MAAM,IAAI,CAAC,UAAU,CAAC,gBAAgB,CAAC,MAAM,EAAE,OAAO,EAAE,IAAI,CAAC,CAAC;IACvE,CAAC;IAIK,KAAD,CAAC,WAAW,CAAU,MAAW;QACpC,OAAO,MAAM,IAAI,CAAC,UAAU,CAAC,WAAW,CAAC,MAAM,CAAC,CAAC;IACnD,CAAC;IAKK,KAAD,CAAC,OAAO,CAAQ,GAAa;QAChC,IAAI,CAAC,UAAU,CAAC,eAAe,EAAE,CAAC;QAElC,GAAG,CAAC,SAAS,CAAC,cAAc,EAAE,WAAW,CAAC,CAAC;QAC3C,IAAI,IAAI,GAAG,2BAA2B,CAAC;QACvC,IAAI,IAAI,MAAM,IAAI,CAAC,UAAU,CAAC,OAAO,EAAE,CAAC;QACxC,IAAI,IAAI,gBAAgB,CAAC;QACzB,IAAI,IAAI;;;;;sBAKU,CAAC;QACnB,GAAG,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;IACjB,CAAC;CACF;AA3OY,sCAAa;AAIxB;IADC,gBAAG,GAAE;;;;6CAGL;AAGK;IADL,gBAAG,EAAC,2BAA2B,CAAC;IAE9B,6BAAK,EAAC,OAAO,CAAC;IACd,6BAAK,EAAC,MAAM,CAAC;;;;iDAEf;AAGK;IADL,gBAAG,EAAC,oBAAoB,CAAC;IACN,6BAAK,EAAC,MAAM,CAAC;;;;iDAEhC;AAGK;IADL,gBAAG,EAAC,sBAAsB,CAAC;IACN,6BAAK,EAAC,MAAM,CAAC;;;;mDAElC;AAMK;IAJL,gBAAG,EAAC,cAAc,CAAC;IACnB,0BAAY,EAAC,EAAE,OAAO,EAAE,gDAAgD,EAAE,CAAC;IAC3E,sBAAQ,EAAC,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE,QAAQ,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;IAC5D,yBAAW,EAAC,EAAE,MAAM,EAAE,GAAG,EAAE,WAAW,EAAE,oDAAoD,EAAE,CAAC;IAC5E,6BAAK,EAAC,QAAQ,CAAC;;;;iDAElC;AAOK;IALL,iBAAI,EAAC,cAAc,CAAC;IACpB,0BAAY,EAAC,EAAE,OAAO,EAAE,yBAAyB,EAAE,CAAC;IACpD,sBAAQ,EAAC,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE,QAAQ,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;IAC5D,qBAAO,EAAC,EAAE,IAAI,EAAE,MAAM,EAAE,WAAW,EAAE,yBAAyB,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;IACjF,yBAAW,EAAC,EAAE,MAAM,EAAE,GAAG,EAAE,WAAW,EAAE,uCAAuC,EAAE,CAAC;IAC3D,6BAAK,EAAC,QAAQ,CAAC;IAAkB,4BAAI,GAAE;;;;qDAG9D;AAMK;IAJL,gBAAG,EAAC,iBAAiB,CAAC;IACtB,0BAAY,EAAC,EAAE,OAAO,EAAE,wBAAwB,EAAE,CAAC;IACnD,sBAAQ,EAAC,EAAE,IAAI,EAAE,QAAQ,EAAE,IAAI,EAAE,QAAQ,EAAE,QAAQ,EAAE,IAAI,EAAE,CAAC;IAC5D,yBAAW,EAAC,EAAE,MAAM,EAAE,GAAG,EAAE,WAAW,EAAE,8CAA8C,EAAE,CAAC;IACnE,6BAAK,EAAC,QAAQ,CAAC;;;;oDAErC;AAGK;IADL,gBAAG,EAAC,cAAc,CAAC;IACG,6BAAK,EAAC,QAAQ,CAAC;IAAkB,6BAAK,EAAC,SAAS,CAAC;;;;oDAEvE;AAOK;IALL,gBAAG,EAAC,eAAe,CAAC;IACpB,0BAAY,EAAC,EAAE,OAAO,EAAE,yBAAyB,EAAE,CAAC;IACpD,sBAAQ,EAAC,EAAE,IAAI,EAAE,KAAK,EAAE,QAAQ,EAAE,IAAI,EAAE,WAAW,EAAE,iBAAiB,EAAE,CAAC;IACzE,sBAAQ,EAAC,EAAE,IAAI,EAAE,QAAQ,EAAE,QAAQ,EAAE,KAAK,EAAE,WAAW,EAAE,wBAAwB,EAAE,CAAC;IACpF,sBAAQ,EAAC,EAAE,IAAI,EAAE,OAAO,EAAE,QAAQ,EAAE,KAAK,EAAE,WAAW,EAAE,0BAA0B,EAAE,CAAC;IAEnF,6BAAK,EAAC,KAAK,CAAC;IACZ,6BAAK,EAAC,QAAQ,CAAC;IACf,6BAAK,EAAC,OAAO,CAAC;;;;kDAYhB;AAKK;IAHL,gBAAG,EAAC,WAAW,CAAC;IAChB,0BAAY,EAAC,EAAE,OAAO,EAAE,6BAA6B,EAAE,CAAC;IACxD,sBAAQ,EAAC,EAAE,IAAI,EAAE,OAAO,EAAE,QAAQ,EAAE,IAAI,EAAE,WAAW,EAAE,kBAAkB,EAAE,CAAC;IAC5D,6BAAK,EAAC,OAAO,CAAC;;;;8CAS9B;AAIK;IAFL,gBAAG,EAAC,wBAAwB,CAAC;IAC7B,0BAAY,EAAC,EAAE,OAAO,EAAE,2BAA2B,EAAE,CAAC;;;;iEAGtD;AAIK;IAFL,gBAAG,EAAC,YAAY,CAAC;IACjB,0BAAY,EAAC,EAAE,OAAO,EAAE,wBAAwB,EAAE,CAAC;;;;+CAGnD;AAKK;IAFL,gBAAG,EAAC,WAAW,CAAC;IAChB,0BAAY,EAAC,EAAE,OAAO,EAAE,UAAU,EAAE,CAAC;IACrB,6BAAK,GAAE;;;;8CAEvB;AAIK;IAFL,gBAAG,EAAC,YAAY,CAAC;IACjB,0BAAY,EAAC,EAAE,OAAO,EAAE,UAAU,EAAE,CAAC;IACpB,6BAAK,GAAE;;;;+CAExB;AAOK;IALL,gBAAG,EAAC,cAAc,CAAC;IACnB,0BAAY,EAAC,EAAE,OAAO,EAAE,gBAAgB,EAAE,CAAC;IAC3C,yBAAW,EAAC,EAAE,MAAM,EAAE,GAAG,EAAE,WAAW,EAAE,sCAAsC,EAAE,CAAC;IACjF,sBAAQ,EAAC,EAAE,IAAI,EAAE,UAAU,EAAE,QAAQ,EAAE,IAAI,EAAE,WAAW,EAAE,UAAU,EAAE,CAAC;IACvE,sBAAQ,EAAC,EAAE,IAAI,EAAE,QAAQ,EAAE,QAAQ,EAAE,IAAI,EAAE,WAAW,EAAE,SAAS,EAAE,CAAC;IAClD,6BAAK,EAAC,UAAU,CAAC;IAAoB,6BAAK,EAAC,QAAQ,CAAC;;;;gDAEtE;AAKK;IAHL,gBAAG,EAAC,gBAAgB,CAAC;IACrB,0BAAY,EAAC,EAAE,OAAO,EAAE,sBAAsB,EAAE,CAAC;IACjD,yBAAW,EAAC,EAAE,MAAM,EAAE,GAAG,EAAE,WAAW,EAAE,2CAA2C,EAAE,CAAC;;;;mDAItF;AAGK;IADL,gBAAG,EAAC,kBAAkB,CAAC;;;;qDAIvB;AAKK;IAHL,gBAAG,EAAC,aAAa,CAAC;IAClB,0BAAY,EAAC,EAAE,OAAO,EAAE,sBAAsB,EAAE,CAAC;IACjD,yBAAW,EAAC,EAAE,MAAM,EAAE,GAAG,EAAE,WAAW,EAAE,2CAA2C,EAAE,CAAC;;;;gDAItF;AAGK;IADL,gBAAG,EAAC,eAAe,CAAC;;;;kDAIpB;AAGD;IADC,gBAAG,EAAC,MAAM,CAAC;;;;yCAGX;AAQK;IANL,gBAAG,EAAC,aAAa,CAAC;IAClB,0BAAY,EAAC,EAAE,OAAO,EAAE,gBAAgB,EAAE,CAAC;IAC3C,yBAAW,EAAC,EAAE,MAAM,EAAE,GAAG,EAAE,WAAW,EAAE,oCAAoC,EAAE,CAAC;IAC/E,sBAAQ,EAAC,EAAE,IAAI,EAAE,SAAS,EAAE,QAAQ,EAAE,KAAK,EAAE,WAAW,EAAE,SAAS,EAAE,CAAC;IACtE,sBAAQ,EAAC,EAAE,IAAI,EAAE,UAAU,EAAE,QAAQ,EAAE,KAAK,EAAE,WAAW,EAAE,UAAU,EAAE,CAAC;IACxE,sBAAQ,EAAC,EAAE,IAAI,EAAE,QAAQ,EAAE,QAAQ,EAAE,IAAI,EAAE,WAAW,EAAE,QAAQ,EAAE,CAAC;IAClD,6BAAK,EAAC,SAAS,CAAC;IAAmB,6BAAK,EAAC,UAAU,CAAC;IAAoB,6BAAK,EAAC,QAAQ,CAAC;;;;+CAExG;AAQK;IANL,iBAAI,EAAC,aAAa,CAAC;IACnB,0BAAY,EAAC,EAAE,OAAO,EAAE,gBAAgB,EAAE,CAAC;IAC3C,yBAAW,EAAC,EAAE,MAAM,EAAE,GAAG,EAAE,WAAW,EAAE,oCAAoC,EAAE,CAAC;IAC/E,sBAAQ,EAAC,EAAE,IAAI,EAAE,SAAS,EAAE,QAAQ,EAAE,KAAK,EAAE,WAAW,EAAE,SAAS,EAAE,CAAC;IACtE,sBAAQ,EAAC,EAAE,IAAI,EAAE,UAAU,EAAE,QAAQ,EAAE,KAAK,EAAE,WAAW,EAAE,UAAU,EAAE,CAAC;IACxE,qBAAO,EAAC,EAAE,WAAW,EAAE,WAAW,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;IAC/C,6BAAK,EAAC,SAAS,CAAC;IAAmB,6BAAK,EAAC,UAAU,CAAC;IAAoB,4BAAI,GAAE;;;;kDAElG;AAMK;IAJL,iBAAI,EAAC,gBAAgB,CAAC;IACtB,0BAAY,EAAC,EAAE,OAAO,EAAE,wBAAwB,EAAE,CAAC;IACnD,yBAAW,EAAC,EAAE,MAAM,EAAE,GAAG,EAAE,WAAW,EAAE,0CAA0C,EAAE,CAAC;IACrF,qBAAO,EAAC,EAAE,WAAW,EAAE,oBAAoB,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;IACrD,6BAAK,GAAE;IAAe,4BAAI,GAAE;;;;qDAGnD;AAKK;IAHL,gBAAG,EAAC,gBAAgB,CAAC;IACrB,0BAAY,EAAC,EAAE,OAAO,EAAE,wBAAwB,EAAE,CAAC;IACnD,yBAAW,EAAC,EAAE,MAAM,EAAE,GAAG,EAAE,WAAW,EAAE,4CAA4C,EAAE,CAAC;IACnE,6BAAK,GAAE;;;;kDAE3B;AAKK;IAHL,gBAAG,EAAC,eAAe,CAAC;IACpB,0BAAY,EAAC,EAAE,OAAO,EAAE,gBAAgB,EAAE,CAAC;IAC3C,yBAAW,EAAC,EAAE,MAAM,EAAE,GAAG,EAAE,WAAW,EAAE,qCAAqC,EAAE,CAAC;;;;iDAGhF;AAOK;IALL,iBAAI,EAAC,yBAAyB,CAAC;IAC/B,0BAAY,EAAC,EAAE,OAAO,EAAE,wBAAwB,EAAE,CAAC;IACnD,yBAAW,EAAC,EAAE,MAAM,EAAE,GAAG,EAAE,WAAW,EAAE,0CAA0C,EAAE,CAAC;IACrF,sBAAQ,EAAC,EAAE,IAAI,EAAE,SAAS,EAAE,QAAQ,EAAE,KAAK,EAAE,WAAW,EAAE,SAAS,EAAE,CAAC;IACtE,qBAAO,EAAC,EAAE,WAAW,EAAE,WAAW,EAAE,QAAQ,EAAE,IAAI,EAAE,IAAI,EAAE,MAAM,EAAE,CAAC;IAC5C,6BAAK,EAAC,QAAQ,CAAC;IAAkB,6BAAK,EAAC,SAAS,CAAC;IAAmB,4BAAI,GAAE;;;;qDAEjG;AAIK;IAHL,gBAAG,EAAC,cAAc,CAAC;IACnB,0BAAY,EAAC,EAAE,OAAO,EAAE,sBAAsB,EAAE,CAAC;IACjD,yBAAW,EAAC,EAAE,MAAM,EAAE,GAAG,EAAE,WAAW,EAAE,0CAA0C,EAAE,CAAC;IACnE,6BAAK,GAAE;;;;gDAEzB;AAKK;IAHL,gBAAG,EAAC,SAAS,CAAC;IACd,0BAAY,EAAC,EAAE,OAAO,EAAE,mCAAmC,EAAE,CAAC;IAC9D,yBAAW,EAAC,EAAE,MAAM,EAAE,GAAG,EAAE,WAAW,EAAE,sBAAsB,EAAE,CAAC;IACnD,2BAAG,GAAE;;;;4CAcnB;wBA1OU,aAAa;IADzB,uBAAU,GAAE;qCAE8B,wBAAU;GADxC,aAAa,CA2OzB;;;;;;;;;;;;;;;;;;;;ACtPD,6EAAoF;AACpF,gGAAiD;AACjD,uFAA2C;AAC3C,8FAK2B;AAcpB,IAAM,SAAS,GAAf,MAAM,SAAS;IACpB,SAAS,CAAC,QAA4B;QACpC,QAAQ,CAAC,KAAK,CAAC,oCAAgB,CAAC,CAAC,SAAS,CAAC,GAAG,CAAC,CAAC;IAClD,CAAC;CACF;AAJY,8BAAS;oBAAT,SAAS;IAXrB,mBAAM,EAAC;QACN,OAAO,EAAE;YACP,uBAAU,EAAC,GAAG,EAAE,CAAC,+BAAW,CAAC,EAAE,uBAAU,EAAC,GAAG,EAAE,CAAC,+BAAW,CAAC,EAAE,uBAAU,EAAC,GAAG,EAAE,CAAC,kCAAc,CAAC;YAC9F,uBAAU,EAAC,GAAG,EAAE,CAAC,kCAAc,CAAC,EAAE,uBAAU,EAAC,GAAG,EAAE,CAAC,gCAAY,CAAC;YAChE,uBAAU,EAAC,GAAG,EAAE,CAAC,wCAAoB,CAAC,EAAE,uBAAU,EAAC,GAAG,EAAE,CAAC,+BAAW,CAAC;YACrE,uBAAU,EAAC,GAAG,EAAE,CAAC,8BAAU,CAAC,EAAE,uBAAU,EAAC,GAAG,EAAE,CAAC,+BAAW,CAAC,EAAE,uBAAU,EAAC,GAAG,EAAE,CAAC,qCAAiB,CAAC;YAChG,uBAAU,EAAC,GAAG,EAAE,CAAC,kCAAc,CAAC,EAAE,uBAAU,EAAC,GAAG,EAAE,CAAC,kCAAc,CAAC;SAAC;QAErE,WAAW,EAAE,CAAC,8BAAa,CAAC;QAC5B,SAAS,EAAE,CAAC,wBAAU,CAAC;KACxB,CAAC;GACW,SAAS,CAIrB;;;;;;;;;;;;;;;;;;;;;;;AC1BD,6EAA0D;AAC1D,kFAAoD;AACpD,mEAAkC;AAElC,iFAA4C;AAC5C,8FAS2B;AAEpB,IAAM,UAAU,GAAhB,MAAM,UAAU;IAKrB,YAAoB,YAA0B,EACpC,eAAgC,EAChC,eAAgC,EAChC,aAA4B,EAC5B,qBAA4C,EAC5C,YAA0B,EAC1B,WAAwB,EACxB,YAA0B,EAC1B,kBAAsC,EACtC,eAAgC;QATtB,iBAAY,GAAZ,YAAY,CAAc;QACpC,oBAAe,GAAf,eAAe,CAAiB;QAChC,oBAAe,GAAf,eAAe,CAAiB;QAChC,kBAAa,GAAb,aAAa,CAAe;QAC5B,0BAAqB,GAArB,qBAAqB,CAAuB;QAC5C,iBAAY,GAAZ,YAAY,CAAc;QAC1B,gBAAW,GAAX,WAAW,CAAa;QACxB,iBAAY,GAAZ,YAAY,CAAc;QAC1B,uBAAkB,GAAlB,kBAAkB,CAAoB;QACtC,oBAAe,GAAf,eAAe,CAAiB;QAblC,mBAAc,GAA6D,IAAI,GAAG,EAAE,CAAC;QAErF,mBAAc,GAA2B,IAAI,GAAG,EAAE,CAAC;QAenD,eAAU,GAAW,CAAC,CAAC;QAF7B,OAAO,CAAC,GAAG,CAAC,qCAAqC,CAAC,CAAC;IACrD,CAAC;IAGD,YAAY;QACV,OAAO,CAAC,GAAG,CAAC,yBAAyB,CAAC,CAAC;QACvC,IAAI,CAAC;YACH,QAAQ,CAAC,WAAW,CAAC,OAAO,EAAE,kBAAkB,EAAE,cAAc,EAAE,KAAK,IAAI,EAAE;gBAC3E,MAAM,wCAAgB,EAAC,GAAG,CAAC,+BAAO,GAAE,CAAC,wCAAwC,OAAO,CAAC,GAAG,CAAC,QAAQ,EAAE,CAAC;gBACpG,MAAM,GAAG,GAAG,IAAI,IAAI,EAAE,CAAC;gBACvB,IAAI,GAAG,CAAC,UAAU,EAAE,GAAG,CAAC,KAAK,CAAC,EAAE,CAAC;oBAC/B,IAAI,CAAC,gBAAgB,EAAE;gBACzB,CAAC;qBAAM,CAAC;oBACN,MAAM,IAAI,CAAC,qBAAqB,EAAE;gBACpC,CAAC;YACH,CAAC,CAAC;YAiCF,OAAO,CAAC,GAAG,CAAC,qBAAqB,CAAC;QACpC,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,OAAO,CAAC,GAAG,CAAC,cAAc,EAAE,KAAK,CAAC,CAAC;QACrC,CAAC;IACH,CAAC;IACD,KAAK,CAAC,eAAe;QACnB,WAAW,CAAC,KAAK,IAAI,EAAE;YACrB,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,aAAa,CAAC,OAAO,EAAE,CAAC;YACnD,KAAK,MAAM,MAAM,IAAI,OAAO,EAAE,CAAC;gBAC7B,MAAM,gBAAgB,GAAG,MAAM,IAAI,CAAC,kBAAkB,CAAC,YAAY,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC;gBACrF,IAAI,gBAAgB,EAAE,QAAQ,IAAI,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,gBAAgB,EAAE,oBAAoB,CAAC,GAAG,CAAC,IAAI,GAAG,EAAE,CAAC,GAAG,CAAC,EAAE,CAAC;oBAC1G,IAAI,CAAC;wBACH,MAAM,wCAAgB,EAAC,GAAG,MAAM,CAAC,IAAI,UAAU,EAAE,EAAE,OAAO,EAAE,MAAM,EAAE,CAAC,CAAC;wBACtE,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,QAAQ,EAAE,uBAAuB,CAAC,CAAC;oBACxD,CAAC;oBAAC,OAAO,KAAK,EAAE,CAAC;wBACf,kCAAU,EAAC,KAAK,EAAE,qBAAqB,CAAC;oBAC1C,CAAC;gBACH,CAAC;qBAAM,CAAC;oBACN,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,QAAQ,EAAE,kBAAkB,EAAE,IAAI,CAAC,KAAK,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,gBAAgB,EAAE,oBAAoB,CAAC,GAAG,CAAC,IAAI,GAAG,EAAE,CAAC,CAAC,CAAC,CAAC;gBACpI,CAAC;YACH,CAAC;QACH,CAAC,EAAE,MAAM,CAAC;IACZ,CAAC;IAED,KAAK,CAAC,sBAAsB;QAC1B,IAAI,IAAI,GAAG,EAAE,CAAC;QACd,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,kBAAkB,CAAC,OAAO,EAAE,CAAC;QACvD,KAAK,MAAM,IAAI,IAAI,MAAM,EAAE,CAAC;YAC1B,IAAI,IAAI,KAAK,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,MAAM,IAAI,CAAC,UAAU,IAAI,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,MAAM,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,oBAAoB,CAAC,GAAG,CAAC,IAAI,GAAG,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;QAChL,CAAC;QACD,OAAO,IAAI,CAAC;IACd,CAAC;IAED,KAAK,CAAC,gBAAgB;QACpB,MAAM,IAAI,CAAC,SAAS,CAAC,eAAe,CAAC;IACvC,CAAC;IAED,KAAK,CAAC,SAAS,CAAC,QAAgB;QAC9B,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,aAAa,CAAC,OAAO,EAAE,CAAC;QACnD,KAAK,MAAM,MAAM,IAAI,OAAO,EAAE,CAAC;YAC7B,MAAM,GAAG,GAAG,GAAG,MAAM,CAAC,IAAI,IAAI,QAAQ,EAAE;YACxC,OAAO,CAAC,GAAG,CAAC,WAAW,EAAE,GAAG,CAAC;YAC7B,wCAAgB,EAAC,GAAG,CAAC,CAAC;YACtB,MAAM,mBAAK,EAAC,IAAI,CAAC,CAAC;QACpB,CAAC;IACH,CAAC;IAEM,KAAK,CAAC,WAAW;QACtB,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,aAAa,CAAC,OAAO,EAAE,CAAC;QACnD,KAAK,MAAM,MAAM,IAAI,OAAO,EAAE,CAAC;YAC7B,IAAI,MAAM,CAAC,QAAQ,CAAC,WAAW,EAAE,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,CAAC;gBAChD,MAAM,wCAAgB,EAAC,GAAG,MAAM,CAAC,IAAI,OAAO,CAAC,CAAC;gBAC9C,MAAM,mBAAK,EAAC,KAAK,CAAC,CAAC;YACrB,CAAC;QACH,CAAC;IACH,CAAC;IAEM,KAAK,CAAC,aAAa;QACxB,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,aAAa,CAAC,OAAO,EAAE,CAAC;QACnD,KAAK,MAAM,MAAM,IAAI,OAAO,EAAE,CAAC;YAC7B,IAAI,MAAM,CAAC,QAAQ,CAAC,WAAW,EAAE,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,CAAC;gBAChD,MAAM,wCAAgB,EAAC,GAAG,MAAM,CAAC,IAAI,OAAO,CAAC,CAAC;gBAC9C,MAAM,mBAAK,EAAC,KAAK,CAAC,CAAC;YACrB,CAAC;QACH,CAAC;IACH,CAAC;IAEM,KAAK,CAAC,cAAc;QACzB,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,aAAa,CAAC,OAAO,EAAE,CAAC;QACnD,KAAK,MAAM,MAAM,IAAI,OAAO,EAAE,CAAC;YAC7B,IAAI,MAAM,CAAC,QAAQ,CAAC,WAAW,EAAE,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,CAAC;gBAChD,MAAM,wCAAgB,EAAC,GAAG,MAAM,CAAC,IAAI,eAAe,CAAC,CAAC;gBACtD,MAAM,mBAAK,EAAC,KAAK,CAAC,CAAC;YACrB,CAAC;QACH,CAAC;IACH,CAAC;IAEM,KAAK,CAAC,gBAAgB;QAC3B,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,aAAa,CAAC,OAAO,EAAE,CAAC;QACnD,KAAK,MAAM,MAAM,IAAI,OAAO,EAAE,CAAC;YAC7B,IAAI,MAAM,CAAC,QAAQ,CAAC,WAAW,EAAE,CAAC,QAAQ,CAAC,GAAG,CAAC,EAAE,CAAC;gBAChD,MAAM,wCAAgB,EAAC,GAAG,MAAM,CAAC,IAAI,eAAe,CAAC,CAAC;gBACtD,MAAM,mBAAK,EAAC,KAAK,CAAC,CAAC;YACrB,CAAC;QACH,CAAC;IACH,CAAC;IAED,KAAK,CAAC,YAAY,CAAC,KAAc,EAAE,IAAa;QAC9C,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,OAAO,CAAC,KAAK,EAAE,IAAI,CAAC,CAAC;QAC9C,IAAI,CAAC,WAAW,CAAC,KAAK,CAAC,CAAC;QACxB,OAAO,wBAAwB;IACjC,CAAC;IAED,KAAK,CAAC,WAAW,CAAC,KAAa;QAC7B,KAAK,MAAM,IAAI,IAAI,KAAK,EAAE,CAAC;YACzB,IAAI,CAAC;gBACH,MAAM,cAAc,GAAG,MAAM,qCAAiB,CAAC,SAAS,CAAC,IAAI,CAAC,MAAM,EAAE,EAAE,cAAc,EAAE,KAAK,EAAE,OAAO,EAAE,KAAK,EAAE,CAAC,CAAC;gBACjH,MAAM,UAAU,GAAG,MAAM,cAAc,CAAC,iBAAiB,EAAE,CAAC;gBAC5D,MAAM,EAAE,GAAG,MAAM,cAAc,CAAC,KAAK,EAAE;gBACvC,MAAM,WAAW,GAAG,MAAM,cAAc,CAAC,eAAe,EAAE,CAAC;gBAC3D,MAAM,OAAO,GAAG,MAAM,cAAc,CAAC,UAAU,CAAC,EAAE,KAAK,EAAE,GAAG,EAAE,CAAC,CAAC;gBAChE,MAAM,QAAQ,GAA0B,MAAM,cAAc,CAAC,WAAW,EAAE;gBAC1E,MAAM,SAAS,GAAG,MAAM,cAAc,CAAC,UAAU,EAAE,CAAC;gBACpD,MAAM,WAAW,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,OAAO,EAAE,cAAc,CAAC;gBACvE,MAAM,IAAI,CAAC,YAAY,CAAC,MAAM,CAAC,IAAI,CAAC,IAAI,EAAE;oBACxC,QAAQ,EAAE,QAAQ,CAAC,UAAU;oBAC7B,KAAK,EAAE,SAAS,EAAE,UAAU,GAAG,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,cAAc,EAAE,EAAE,EAAE,QAAQ,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,KAAK,EAAE,CAAC,EAAE;oBACxH,SAAS,EAAE,EAAE,CAAC,SAAS;oBACvB,QAAQ,EAAE,EAAE,CAAC,QAAQ,EAAE,QAAQ,EAAE,EAAE,CAAC,QAAQ,EAAE,IAAI,EAAE,WAAW,CAAC,KAAK,EAAE,UAAU,EAAE,OAAO,CAAC,KAAK;oBAChG,UAAU,EAAE,IAAI,EAAE,EAAE,CAAC,EAAE,CAAC,QAAQ,EAAE;oBAClC,WAAW;iBACZ,CAAC;gBACF,MAAM,qCAAiB,CAAC,gBAAgB,CAAC,IAAI,CAAC,MAAM,CAAC,CAAC;YACxD,CAAC;YAAC,OAAO,KAAK,EAAE,CAAC;gBACf,kCAAU,EAAC,KAAK,EAAE,SAAS,CAAC;YAC9B,CAAC;QACH,CAAC;IACH,CAAC;IAED,KAAK,CAAC,eAAe,CAAC,OAA0B,EAAE,cAA+B;QAC/E,MAAM,WAAW,GAAG,EAAE;QACtB,KAAK,MAAM,IAAI,IAAI,OAAO,EAAE,CAAC;YAC3B,IAAI,CAAC;gBACH,IAAI,IAAI,CAAC,SAAS,IAAI,IAAI,CAAC,OAAO,EAAE,CAAC;oBACnC,MAAM,UAAU,GAAgB,IAAI,CAAC,MAAM,CAAC;oBAC5C,MAAM,cAAc,GAAG,UAAU,CAAC,mBAAmB,EAAE,YAAY,CAAC;oBACpE,IAAI,CAAC,UAAU,CAAC,SAAS,IAAI,CAAC,cAAc,IAAI,UAAU,CAAC,iBAAiB,GAAG,EAAE,EAAE,CAAC;wBAClF,MAAM,OAAO,GAAqB;4BAChC,SAAS,EAAE,UAAU,CAAC,EAAE,CAAC,QAAQ,EAAE;4BACnC,WAAW,EAAE,IAAI;4BACjB,iBAAiB,EAAE,UAAU,CAAC,iBAAiB;4BAC/C,OAAO,EAAE,KAAK;4BACd,KAAK,EAAE,UAAU,CAAC,KAAK;4BACvB,SAAS,EAAE,UAAU,CAAC,SAAS;4BAC/B,SAAS,EAAE,UAAU,CAAC,SAAS;4BAC/B,UAAU,EAAE,UAAU,CAAC,UAAU;4BACjC,YAAY,EAAE,IAAI;4BAClB,QAAQ,EAAE,UAAU,CAAC,QAAQ;4BAC7B,SAAS,EAAE,KAAK;yBACjB;wBACD,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,OAAO,CAAC,SAAS,EAAE,OAAO,CAAC;oBACzD,CAAC;gBACH,CAAC;qBAAM,CAAC;oBACN,MAAM,IAAI,GAAG,MAAM,cAAc,CAAC,WAAW,CAAC,IAAI,CAAC,EAAE,CAAC,CAAC;oBACvD,IAAI,IAAI,CAAC,KAAK,GAAG,IAAI,EAAE,CAAC;wBACtB,KAAK,MAAM,OAAO,IAAI,IAAI,EAAE,CAAC;4BAC3B,IAAI,KAAK,GAAG,CAAC,CAAC;4BACd,IAAI,KAAK,GAAG,CAAC;4BACb,IAAI,OAAO,CAAC,KAAK,YAAY,QAAG,CAAC,iBAAiB,EAAE,CAAC;gCACnD,KAAK,EAAE;4BACT,CAAC;iCAAM,IAAI,OAAO,CAAC,KAAK,YAAY,QAAG,CAAC,oBAAoB,IAAI,CAAC,OAAO,CAAC,QAAQ,EAAE,QAAQ,EAAE,UAAU,CAAC,OAAO,CAAC,IAAI,OAAO,CAAC,QAAQ,EAAE,QAAQ,EAAE,UAAU,CAAC,OAAO,CAAC,CAAC,EAAE,CAAC;gCACrK,KAAK,EAAE;4BACT,CAAC;4BACD,WAAW,CAAC,IAAI,CAAC;gCACf,KAAK,EAAE,IAAI,CAAC,KAAK;gCACjB,KAAK;gCACL,KAAK;gCACL,MAAM,EAAE,IAAI,CAAC,EAAE,CAAC,QAAQ,EAAE;6BAC3B,CAAC;wBACJ,CAAC;oBACH,CAAC;gBACH,CAAC;gBACD,OAAO,WAAW,CAAC;YACrB,CAAC;YAAC,OAAO,KAAK,EAAE,CAAC;gBACf,kCAAU,EAAC,KAAK,CAAC;YACnB,CAAC;QACH,CAAC;IACH,CAAC;IAGD,KAAK,CAAC,OAAO,CAAC,KAAc,EAAE,IAAa;QACzC,IAAI,WAAW,GAAG,IAAI,IAAI,EAAE,CAAC;QAE7B,IAAI,WAAW,GAAG,IAAI,IAAI,CAAC,WAAW,CAAC,CAAC;QACxC,WAAW,CAAC,OAAO,CAAC,WAAW,CAAC,OAAO,EAAE,GAAG,CAAC,CAAC,CAAC;QAE/C,IAAI,YAAY,GAAG,IAAI,IAAI,CAAC,WAAW,CAAC,CAAC;QACzC,YAAY,CAAC,OAAO,CAAC,WAAW,CAAC,OAAO,EAAE,GAAG,EAAE,CAAC,CAAC;QAEjD,IAAI,iBAAiB,GAAG,IAAI,IAAI,CAAC,WAAW,CAAC,CAAC;QAC9C,iBAAiB,CAAC,OAAO,CAAC,WAAW,CAAC,OAAO,EAAE,GAAG,EAAE,CAAC,CAAC;QAEtD,IAAI,KAAK,GAAG;YACV,GAAG,EAAE;gBACH,EAAE,SAAS,EAAE,EAAE,GAAG,EAAE,YAAY,EAAE,EAAE,SAAS,EAAE,EAAE,GAAG,EAAE,WAAW,EAAE,EAAE;gBACrE,EAAE,SAAS,EAAE,EAAE,IAAI,EAAE,YAAY,EAAE,GAAG,EAAE,iBAAiB,EAAE,EAAE,SAAS,EAAE,EAAE,GAAG,EAAE,YAAY,EAAE,EAAE;gBAC/F,EAAE,SAAS,EAAE,EAAE,IAAI,EAAE,iBAAiB,EAAE,EAAE,SAAS,EAAE,EAAE,IAAI,EAAE,iBAAiB,EAAE,EAAE;aACnF;SACF,CAAC;QACF,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,YAAY,CAAC,YAAY,CAAC,KAAK,EAAE,EAAE,EAAE,KAAK,IAAI,GAAG,EAAE,IAAI,IAAI,CAAC,CAAC;QACtF,OAAO,KAAK,CAAC;IACf,CAAC;IACD,QAAQ;QACN,OAAO,cAAc,CAAC;IACxB,CAAC;IAED,KAAK,CAAC,YAAY,CAAC,MAAc;QAC/B,MAAM,UAAU,GAAG,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,EAAE,UAAU,EAAE,EAAE,EAAE,YAAY,EAAE,EAAE,EAAE,CAAC;QAC3F,MAAM,WAAW,GAAG,IAAI,CAAC,GAAG,EAAE,CAAC;QAC/B,MAAM,gBAAgB,GAAG,UAAU,CAAC,UAAU,CAAC,MAAM,CAAC,SAAS,CAAC,EAAE,CAAC,WAAW,GAAG,SAAS,IAAI,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC,CAAC;QAC9G,gBAAgB,CAAC,IAAI,CAAC,WAAW,CAAC,CAAC;QACnC,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,MAAM,EAAE,EAAE,YAAY,EAAE,UAAU,CAAC,YAAY,EAAE,UAAU,EAAE,gBAAgB,EAAE,CAAC,CAAC;QACzG,MAAM,MAAM,GAAG,EAAE,KAAK,EAAE,gBAAgB,CAAC,MAAM,EAAE,YAAY,EAAE,UAAU,CAAC,YAAY,EAAE;QACxF,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC;QACnB,OAAO,MAAM,CAAC;IAChB,CAAC;IAED,KAAK,CAAC,gBAAgB,CAAC,MAAc,EAAE,YAAiB;QACtD,MAAM,UAAU,GAAG,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,EAAE,UAAU,EAAE,EAAE,EAAE,YAAY,EAAE,EAAE,EAAE,CAAC;QAC3F,MAAM,mBAAmB,GAAG,EAAE,GAAG,UAAU,CAAC,YAAY,EAAE,GAAG,YAAY,EAAE,CAAC;QAC5E,OAAO,CAAC,GAAG,CAAC,EAAE,YAAY,EAAE,mBAAmB,EAAE,UAAU,EAAE,UAAU,CAAC,UAAU,EAAE,CAAC;QACrF,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,MAAM,EAAE,EAAE,YAAY,EAAE,mBAAmB,EAAE,UAAU,EAAE,UAAU,CAAC,UAAU,EAAE,CAAC,CAAC;IAC5G,CAAC;IAED,KAAK,CAAC,eAAe,CAAC,MAAc;QAClC,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,MAAM,CAAC,CAAC;QACnC,OAAO,EAAE,KAAK,EAAE,CAAC,EAAE,CAAC;IACtB,CAAC;IAED,KAAK,CAAC,eAAe,CAAC,MAAc,EAAE,OAAe;QACnD,MAAM,IAAI,GAAG,EAAE,IAAI,EAAE,CAAC,EAAE,SAAS,EAAE,CAAC,EAAE,UAAU,EAAE,CAAC,EAAE,QAAQ,EAAE,CAAC,EAAE,cAAc,EAAE,CAAC,EAAE,MAAM,EAAE,EAAE,EAAE,CAAC;QAClG,MAAM,YAAY,GAAG,IAAI,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC,CAAC;QAC5D,MAAM,WAAW,GAAG,IAAI,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE,GAAG,EAAE,GAAG,EAAE,GAAG,IAAI,CAAC,CAAC;QAE3D,IAAI,CAAC;YACH,MAAM,MAAM,GAAG,EAAE,MAAM,EAAE,OAAO,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,GAAG,EAAE,OAAO,EAAE,EAAE,SAAS,EAAE,EAAE,IAAI,EAAE,EAAE,EAAE,EAAE,CAAC;YAC7F,MAAM,MAAM,GAAG,EAAE,MAAM,EAAE,OAAO,EAAE,EAAE,OAAO,EAAE,IAAI,EAAE,GAAG,EAAE,OAAO,EAAE,EAAE,CAAC;YAEpE,MAAM,QAAQ,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;YACjE,MAAM,SAAS,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,YAAY,CAAC,MAAM,CAAC,CAAC;YAElE,IAAI,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;gBACxB,IAAI,CAAC,IAAI,GAAG,QAAQ,CAAC,MAAM,CAAC;YAC9B,CAAC;YAED,IAAI,SAAS,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;gBACzB,KAAK,MAAM,GAAG,IAAI,SAAS,EAAE,CAAC;oBAC5B,IAAI,GAAG,CAAC,QAAQ,GAAG,YAAY,EAAE,CAAC;wBAChC,IAAI,GAAG,CAAC,SAAS,EAAE,CAAC;4BAClB,IAAI,CAAC,SAAS,EAAE,CAAC;wBACnB,CAAC;wBACD,IAAI,GAAG,CAAC,UAAU,EAAE,CAAC;4BACnB,IAAI,CAAC,UAAU,EAAE,CAAC;wBACpB,CAAC;wBACD,IAAI,GAAG,CAAC,QAAQ,EAAE,CAAC;4BACjB,IAAI,CAAC,QAAQ,EAAE,CAAC;wBAClB,CAAC;wBACD,IAAI,GAAG,CAAC,QAAQ,GAAG,IAAI,CAAC,cAAc,EAAE,CAAC;4BACvC,IAAI,CAAC,cAAc,GAAG,GAAG,CAAC,QAAQ,CAAC;wBACrC,CAAC;wBACD,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,GAAG,GAAG,CAAC,MAAM,CAAC,CAAC;oBAClC,CAAC;yBAAM,CAAC;wBACN,IAAI,GAAG,CAAC,gBAAgB,GAAG,WAAW,EAAE,CAAC;4BACvC,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,GAAG,CAAC,OAAO,EAAE,GAAG,CAAC,MAAM,EAAE,EAAE,SAAS,EAAE,CAAC,EAAE,MAAM,EAAE,EAAE,EAAE,SAAS,EAAE,KAAK,EAAE,UAAU,EAAE,KAAK,EAAE,gBAAgB,EAAE,CAAC,GAAG,CAAC,CAAC;wBACtJ,CAAC;oBACH,CAAC;gBACH,CAAC;YACH,CAAC;QACH,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,kCAAU,EAAC,KAAK,CAAC,CAAC;QACpB,CAAC;QACD,OAAO,CAAC,GAAG,CAAC,IAAI,CAAC,CAAC;QAClB,OAAO,IAAI,CAAC;IACd,CAAC;IAED,KAAK,CAAC,aAAa,CAAC,MAAc,EAAE,KAAa,EAAE,OAAe;QAChE,SAAS,eAAe,CAAC,GAAW;YAClC,IAAI,CAAC;gBACH,OAAO,GAAG,KAAK,kBAAkB,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,kBAAkB,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC;YACzE,CAAC;YAAC,OAAO,CAAC,EAAE,CAAC;gBACX,OAAO,GAAG,CAAC;YACb,CAAC;QACH,CAAC;QACD,SAAS,gBAAgB,CAAC,IAAY;YACpC,IAAI,GAAG,IAAI,CAAC,OAAO,CAAC,8BAA8B,EAAE,MAAM,CAAC,CAAC;YAC5D,OAAO,IAAI,CAAC;QACd,CAAC;QACD,MAAM,cAAc,GAAG,eAAe,CAAC,OAAO,CAAC,CAAC;QAChD,OAAO,CAAC,GAAG,CAAC,kBAAkB,EAAE,cAAc,CAAC,CAAC;QAChD,MAAM,cAAc,GAAG,gBAAgB,CAAC,cAAc,CAAC,CAAC;QACxD,OAAO,CAAC,GAAG,CAAC,kBAAkB,EAAE,cAAc,CAAC,CAAC;QAChD,MAAM,cAAc,GAAG,kBAAkB,CAAC,cAAc,CAAC,CAAC,OAAO,CAAC,OAAO,EAAE,KAAK,CAAC,CAAC;QAClF,OAAO,CAAC,GAAG,CAAC,kBAAkB,EAAE,cAAc,CAAC,CAAC;QAChD,MAAM,GAAG,GAAG,GAAG,+BAAO,EAAC,MAAM,EAAE,KAAK,CAAC,+BAA+B,cAAc,EAAE,CAAC;QACrF,OAAO,CAAC,MAAM,wCAAgB,EAAC,GAAG,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,IAAI,CAAC;IACpD,CAAC;IAED,KAAK,CAAC,aAAa,CAAC,KAAa;QAC/B,OAAO,MAAM,IAAI,CAAC,aAAa,CAAC,aAAa,CAAC,KAAK,CAAC;IACtD,CAAC;IACD,KAAK,CAAC,UAAU,CAAC,KAAa;QAC5B,MAAM,MAAM,GAAG,CAAC,MAAM,IAAI,CAAC,aAAa,CAAC,aAAa,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QAClE,MAAM,IAAI,GAAG,MAAM,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,CAAC;QAC/C,OAAO,EAAE,MAAM,EAAE,IAAI,EAAE;IACzB,CAAC;IACD,KAAK,CAAC,qBAAqB;QACzB,OAAO,CAAC,GAAG,CAAC,yBAAyB,CAAC;QACtC,MAAM,qCAAiB,CAAC,aAAa,EAAE,CAAC;QACxC,MAAM,mBAAK,EAAC,IAAI,CAAC,CAAC;QAClB,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,aAAa,CAAC,OAAO,EAAE,CAAC;QACnD,OAAO,CAAC,GAAG,CAAC,KAAK,EAAE,QAAQ,EAAE,EAAE;YAC7B,IAAI,CAAC;gBACH,IAAI,IAAI,GAAG,MAAM,wCAAgB,EAAC,GAAG,QAAQ,CAAC,IAAI,cAAc,EAAE,EAAE,OAAO,EAAE,MAAM,EAAE,EAAE,CAAC,CAAC,CAAC;gBAC1F,MAAM,wCAAgB,EAAC,GAAG,CAAC,+BAAO,GAAE,CAAC,6BAA6B,QAAQ,CAAC,QAAQ,KAAK,IAAI,CAAC,IAAI,CAAC,gBAAgB,EAAE,CAAC;gBACrH,IAAI,IAAI,EAAE,IAAI,EAAE,gBAAgB,IAAI,IAAI,EAAE,IAAI,EAAE,gBAAgB,GAAG,GAAG,EAAE,CAAC;oBACvE,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,qBAAqB,CAAC,iBAAiB,CAAC,GAAG,EAAE,CAAC,EAAE,IAAI,CAAC,IAAI,EAAE,GAAG,CAAC,CAAC;oBAC1F,MAAM,wCAAgB,EAAC,GAAG,CAAC,+BAAO,GAAE,CAAC,sCAAsC,QAAQ,CAAC,QAAQ,KAAK,MAAM,CAAC,MAAM,EAAE,CAAC;oBACjH,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,QAAQ,CAAC,IAAI,EAAE,MAAM,CAAC,CAAC;gBACjD,CAAC;YACH,CAAC;YAAC,OAAO,KAAK,EAAE,CAAC;gBACf,kCAAU,EAAC,KAAK,CAAC;YACnB,CAAC;QACH,CAAC,CAAC;QACF,IAAI,CAAC,gBAAgB,EAAE,CAAC;QACxB,OAAO,CAAC,GAAG,CAAC,4CAA4C,EAAE,OAAO,CAAC,MAAM,CAAC,CAAC;QAC1E,OAAO,4BAA4B;IACrC,CAAC;IAED,KAAK,CAAC,gBAAgB;QACpB,IAAI,CAAC,qBAAqB,GAAG,WAAW,CAAC,KAAK,IAAI,EAAE;YAClD,MAAM,IAAI,GAAG,KAAK,CAAC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,IAAI,EAAE,CAAC,CAAC;YACpD,IAAI,IAAI,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;gBACpB,OAAO,CAAC,GAAG,CAAC,4BAA4B,EAAE,IAAI,IAAI,EAAE,CAAC,WAAW,EAAE,CAAC,CAAC;gBACpE,MAAM,QAAQ,GAAG,IAAI,CAAC,GAAG,CAAC,KAAK,EAAC,GAAG,EAAC,EAAE;oBACpC,MAAM,QAAQ,GAAG,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,GAAG,CAAC,CAAC;oBAC9C,IAAI,QAAQ,IAAI,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;wBACpC,MAAM,OAAO,GAAG,QAAQ,CAAC,KAAK,EAAE,CAAC;wBACjC,OAAO,CAAC,GAAG,CAAC,GAAG,EAAE,qBAAqB,EAAE,QAAQ,CAAC,MAAM,CAAC;wBACxD,IAAI,CAAC,cAAc,CAAC,GAAG,CAAC,GAAG,EAAE,QAAQ,CAAC,CAAC;wBACvC,IAAI,CAAC;4BACH,MAAM,wCAAgB,EAAC,GAAG,GAAG,yBAAyB,OAAO,CAAC,QAAQ,EAAE,CAAC,CAAC;4BAC1E,OAAO,CAAC,GAAG,CAAC,GAAG,EAAE,mBAAmB,EAAE,OAAO,CAAC,QAAQ,CAAC,CAAC;wBAC1D,CAAC;wBAAC,OAAO,KAAK,EAAE,CAAC;4BACf,kCAAU,EAAC,KAAK,EAAE,aAAa,CAAC,CAAC;wBACnC,CAAC;oBACH,CAAC;yBAAM,CAAC;wBACN,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC;oBAClC,CAAC;gBACH,CAAC,CAAC,CAAC;gBACH,MAAM,OAAO,CAAC,GAAG,CAAC,QAAQ,CAAC,CAAC;YAC9B,CAAC;iBAAM,CAAC;gBACN,IAAI,CAAC,wBAAwB,EAAE;YACjC,CAAC;QACH,CAAC,EAAE,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,CAAC;IACpB,CAAC;IAED,wBAAwB;QACtB,IAAI,IAAI,CAAC,qBAAqB,EAAE,CAAC;YAC/B,OAAO,CAAC,GAAG,CAAC,kCAAkC,CAAC;YAC/C,aAAa,CAAC,IAAI,CAAC,qBAAqB,CAAC,CAAC;YAC1C,IAAI,CAAC,qBAAqB,GAAG,IAAI,CAAC;QACpC,CAAC;IACH,CAAC;IAED,KAAK,CAAC,UAAU;QACd,MAAM,IAAI,CAAC,aAAa,CAAC,UAAU,EAAE;QACrC,MAAM,IAAI,CAAC,aAAa,CAAC,WAAW,EAAE,CAAC;IACzC,CAAC;IAED,KAAK,CAAC,YAAY,CAAC,MAAc;QAC/B,IAAI,WAAW,GAAG,EAAE;QACpB,MAAM,SAAS,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,EAAE,MAAM,EAAE,CAAC,CAAC;QAChE,KAAK,MAAM,QAAQ,IAAI,SAAS,EAAE,CAAC;YACjC,MAAM,YAAY,GAAG,IAAI,MAAM,CAAC,QAAQ,CAAC,OAAO,EAAE,GAAG,CAAC;YACtD,MAAM,QAAQ,GAAG,MAAM,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC,EAAE,QAAQ,EAAE,EAAE,MAAM,EAAE,YAAY,EAAE,EAAE,CAAC;YAC9F,KAAK,MAAM,OAAO,IAAI,QAAQ,EAAE,CAAC;gBAC/B,MAAM,GAAG,GAAG,GAAG,OAAO,CAAC,IAAI,cAAc,MAAM,EAAE,CAAC;gBAClD,OAAO,CAAC,GAAG,CAAC,aAAa,EAAE,GAAG,CAAC;gBAC/B,MAAM,MAAM,GAAG,MAAM,wCAAgB,EAAC,GAAG,CAAC,CAAC;gBAC3C,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC;YAC1B,CAAC;YACD,WAAW,GAAG,WAAW,GAAG,KAAK,GAAG,QAAQ,CAAC,OAAO,CAAC;QACvD,CAAC;QACD,OAAO,WAAW;IACpB,CAAC;IAED,KAAK,CAAC,cAAc,CAAC,MAAc;QACjC,IAAI,WAAW,GAAG,EAAE;QACpB,MAAM,SAAS,GAAG,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,EAAE,MAAM,EAAE,CAAC,CAAC;QAChE,KAAK,MAAM,QAAQ,IAAI,SAAS,EAAE,CAAC;YACjC,MAAM,YAAY,GAAG,IAAI,MAAM,CAAC,QAAQ,CAAC,OAAO,EAAE,GAAG,CAAC;YACtD,MAAM,QAAQ,GAAG,MAAM,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC,EAAE,QAAQ,EAAE,EAAE,MAAM,EAAE,YAAY,EAAE,EAAE,CAAC;YAC9F,KAAK,MAAM,OAAO,IAAI,QAAQ,EAAE,CAAC;gBAC/B,MAAM,GAAG,GAAG,GAAG,OAAO,CAAC,IAAI,gBAAgB,MAAM,EAAE,CAAC;gBACpD,OAAO,CAAC,GAAG,CAAC,aAAa,EAAE,GAAG,CAAC;gBAC/B,MAAM,MAAM,GAAG,MAAM,wCAAgB,EAAC,GAAG,CAAC,CAAC;gBAC3C,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC;YAC1B,CAAC;YACD,WAAW,GAAG,WAAW,GAAG,KAAK,GAAG,QAAQ,CAAC,OAAO,CAAC;QACvD,CAAC;QACD,OAAO,WAAW;IACpB,CAAC;IAED,KAAK,CAAC,cAAc,CAAC,QAAgB,EAAE,MAAc;QACnD,MAAM,IAAI,GAAG,CAAC,MAAM,IAAI,CAAC,aAAa,CAAC,MAAM,CAAC,EAAE,QAAQ,EAAE,QAAQ,CAAC,WAAW,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;QACxF,OAAO,CAAC,GAAG,CAAC,yBAAyB,QAAQ,MAAM,MAAM,EAAE,CAAC;QAC5D,IAAI,IAAI,EAAE,CAAC;YACT,MAAM,OAAO,GAAG,EAAE,MAAM,EAAE,OAAO,EAAE,IAAI,CAAC,QAAQ,EAAE;YAClD,MAAM,OAAO,GAAG;gBACd,MAAM,EAAE,MAAM;gBACd,OAAO,EAAE,EAAE,cAAc,EAAE,kBAAkB,EAAE;gBAC/C,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,OAAO,CAAC;aAC9B,CAAC;YACF,MAAM,MAAM,GAAG,MAAM,wCAAgB,EAAC,iDAAiD,EAAE,OAAO,EAAE,CAAC,CAAC,CAAC;YACrG,OAAO,CAAC,GAAG,CAAC,MAAM,EAAE,IAAI,CAAC;QAC3B,CAAC;IACH,CAAC;IAED,KAAK,CAAC,WAAW,CAAC,OAAe,EAAE,QAAgB,EAAE,MAAc;QACjE,IAAI,CAAC,OAAO,EAAE,CAAC;YACb,OAAO,GAAG,QAAQ,EAAE,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC;QACxC,CAAC;QACD,OAAO,MAAM,IAAI,CAAC,eAAe,CAAC,OAAO,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;IAC7D,CAAC;IAED,KAAK,CAAC,cAAc,CAAC,OAAe,EAAE,QAAgB,EAAE,IAAS;QAC/D,IAAI,CAAC,OAAO,EAAE,CAAC;YACb,OAAO,GAAG,QAAQ,EAAE,OAAO,CAAC,KAAK,EAAE,EAAE,CAAC;QACxC,CAAC;QACD,MAAM,MAAM,GAAG,IAAI,CAAC,MAAM,CAAC;QAC3B,OAAO,MAAM,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,OAAO,EAAE,MAAM,EAAE,IAAI,CAAC,CAAC;IAClE,CAAC;IAED,KAAK,CAAC,gBAAgB,CAAC,MAAc,EAAE,OAAe,EAAE,IAAS;QAC/D,IAAI,CAAC,eAAe,CAAC,MAAM,CAAC,OAAO,EAAE,MAAM,EAAE,IAAI,CAAC;IACpD,CAAC;IAED,KAAK,CAAC,aAAa,CAAC,MAAW;IAE/B,CAAC;IAED,KAAK,CAAC,YAAY;QAChB,OAAO,MAAM,IAAI,CAAC,YAAY,CAAC,OAAO,EAAE,CAAC;IAC3C,CAAC;IAED,KAAK,CAAC,WAAW,CAAC,MAAW;QAC3B,MAAM,MAAM,GAAQ,CAAC,MAAM,IAAI,CAAC,aAAa,CAAC,YAAY,CAAC,MAAM,CAAE,CAAC,CAAC,CAAC,CAAC;QACvE,MAAM,MAAM,GAAG,EAAE,GAAG,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,MAAM,CAAC,EAAE;QAC1D,OAAO,MAAM,CAAC,SAAS,CAAC,CAAC;QACzB,OAAO,MAAM,CAAC,QAAQ,CAAC,CAAC;QACxB,OAAO,MAAM,CAAC,WAAW,CAAC,CAAC;QAC3B,OAAO,MAAM,CAAC,eAAe,CAAC,CAAC;QAC/B,OAAO,MAAM;IACf,CAAC;IAED,uBAAuB,CAAC,WAAW;QACjC,MAAM,YAAY,GAAG,KAAK,CAAC;QAC3B,MAAM,WAAW,GAAG,WAAW,EAAE,KAAK,CAAC,YAAY,CAAC,CAAC;QACrD,IAAI,WAAW,IAAI,WAAW,CAAC,MAAM,GAAG,CAAC,EAAE,CAAC;YAE1C,OAAO,QAAQ,CAAC,WAAW,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC;QACtC,CAAC;QAED,OAAO,IAAI,CAAC;IACd,CAAC;IAED,KAAK,CAAC,uBAAuB;QAC3B,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,aAAa,CAAC,OAAO,EAAE,CAAC;QACnD,MAAM,iBAAiB,GAAG,EAAE,CAAC;QAC7B,KAAK,MAAM,IAAI,IAAI,OAAO,EAAE,CAAC;YAC3B,IAAI,IAAI,CAAC,uBAAuB,CAAC,IAAI,CAAC,QAAQ,CAAC;gBAC7C,iBAAiB,CAAC,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE,CAAC,GAAG;oBAC/C,OAAO,EAAE,IAAI,CAAC,QAAQ,CAAC,WAAW,EAAE;oBACpC,UAAU,EAAE,CAAC;oBACb,SAAS,EAAE,CAAC;oBACZ,YAAY,EAAE,CAAC;oBACf,WAAW,EAAE,CAAC;oBACd,iBAAiB,EAAE,CAAC;oBACpB,eAAe,EAAE,CAAC;oBAClB,QAAQ,EAAE,CAAC;oBACX,YAAY,EAAE,CAAC;oBACf,WAAW,EAAE,CAAC;oBACd,eAAe,EAAE,CAAC;oBAClB,KAAK,EAAE,EAAE;oBACT,WAAW,EAAE,CAAC;oBACd,aAAa,EAAE,EAAE;iBAClB;QACL,CAAC;QAED,OAAO,iBAAiB,CAAC;IAC3B,CAAC;IAED,KAAK,CAAC,OAAO;QACX,MAAM,WAAW,GAAG,MAAM,IAAI,CAAC,uBAAuB,EAAE,CAAC;QACzD,MAAM,KAAK,GAAG,MAAM,IAAI,CAAC,WAAW,CAAC,OAAO,EAAE,CAAC;QAC/C,KAAK,MAAM,IAAI,IAAI,KAAK,EAAE,CAAC;YACzB,MAAM,EAAE,KAAK,EAAE,OAAO,EAAE,SAAS,EAAE,cAAc,EAAE,SAAS,EAAE,OAAO,EAAE,MAAM,EAAE,IAAI,EAAE,UAAU,EAAE,GAAG,IAAI,CAAC;YAEzG,IAAI,MAAM,IAAI,WAAW,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC,EAAE,CAAC;gBAChD,MAAM,QAAQ,GAAG,WAAW,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC,CAAC;gBACnD,QAAQ,CAAC,UAAU,IAAI,KAAK,CAAC;gBAC7B,QAAQ,CAAC,SAAS,IAAI,SAAS,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC5C,QAAQ,CAAC,YAAY,IAAI,CAAC,SAAS,GAAG,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC7D,QAAQ,CAAC,WAAW,IAAI,CAAC,cAAc,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC7D,QAAQ,CAAC,iBAAiB,IAAI,CAAC,SAAS,GAAG,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBACrE,QAAQ,CAAC,eAAe,IAAI,CAAC,SAAS,GAAG,EAAE,IAAI,CAAC,SAAS,IAAI,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBAC/E,IAAI,SAAS,GAAG,EAAE,IAAI,CAAC,SAAS,EAAE,CAAC;oBACjC,QAAQ,CAAC,KAAK,GAAG,QAAQ,CAAC,KAAK,GAAG,IAAI,IAAI,IAAI,CAAC;gBACjD,CAAC;gBAED,IAAI,SAAS,IAAI,CAAC,CAAC,SAAS,GAAG,EAAE,IAAI,CAAC,UAAU,CAAC,IAAI,CAAC,SAAS,GAAG,GAAG,IAAI,UAAU,CAAC,CAAC,EAAE,CAAC;oBACtF,QAAQ,CAAC,WAAW,EAAE,CAAC;oBACvB,QAAQ,CAAC,aAAa,GAAG,QAAQ,CAAC,aAAa,GAAG,IAAI,IAAI,IAAI,CAAC;gBACjE,CAAC;gBAED,IAAI,OAAO,EAAE,CAAC;oBACZ,QAAQ,CAAC,QAAQ,IAAI,CAAC,CAAC;oBACvB,QAAQ,CAAC,YAAY,IAAI,SAAS,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;oBAC/C,QAAQ,CAAC,WAAW,IAAI,cAAc,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;oBAC/C,QAAQ,CAAC,eAAe,IAAI,CAAC,SAAS,GAAG,EAAE,IAAI,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;gBACrE,CAAC;YACH,CAAC;QACH,CAAC;QAED,MAAM,gBAAgB,GAAG,MAAM,CAAC,OAAO,CAAC,WAAW,CAAC,CAAC;QACrD,gBAAgB,CAAC,IAAI,CAAC,CAAC,CAAM,EAAE,CAAM,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,iBAAiB,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,iBAAiB,CAAC,CAAC;QAC3F,IAAI,KAAK,GAAG,EAAE,CAAC;QACf,KAAK,MAAM,CAAC,OAAO,EAAE,QAAQ,CAAC,IAAI,gBAAgB,EAAE,CAAC;YACnD,KAAK,IAAI,GAAG,OAAO,CAAC,WAAW,EAAE,SAAU,QAAgB,CAAC,iBAAiB,UAAW,QAAgB,CAAC,KAAK,MAAM,CAAC;QACvH,CAAC;QAED,gBAAgB,CAAC,IAAI,CAAC,CAAC,CAAM,EAAE,CAAM,EAAE,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,WAAW,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC;QAC/E,IAAI,MAAM,GAAG,EAAE,CAAC;QAChB,KAAK,MAAM,CAAC,OAAO,EAAE,QAAQ,CAAC,IAAI,gBAAgB,EAAE,CAAC;YACnD,MAAM,IAAI,GAAG,OAAO,CAAC,WAAW,EAAE,SAAU,QAAgB,CAAC,WAAW,SAAU,QAAgB,CAAC,aAAa,MAAM,CAAC;QACzH,CAAC;QAED,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,iBAAiB,EAAE,CAAC;QAC9C,OAAO,CAAC,GAAG,CAAC,MAAM,CAAC;QAEnB,OAAO,CACL;;kCAE4B,KAAK;oCACH,MAAM;;;qCAGL,MAAM;;mBAExB,CACd,CAAC;IACJ,CAAC;IAED,KAAK,CAAC,iBAAiB;QACrB,IAAI,IAAI,GAAG,EAAE,CAAC;QACd,MAAM,MAAM,GAAG,MAAM,IAAI,CAAC,kBAAkB,CAAC,OAAO,EAAE,CAAC;QACvD,KAAK,MAAM,IAAI,IAAI,MAAM,EAAE,CAAC;YAC1B,IAAI,IAAI,GAAG,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,SAAS,IAAI,CAAC,UAAU,OAAO,IAAI,CAAC,UAAU,GAAG,CAAC,CAAC,CAAC,CAAC,MAAM,MAAM,CAAC,CAAC,IAAI,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,oBAAoB,CAAC,GAAG,CAAC,IAAI,GAAG,EAAE,CAAC,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,MAAM,CAAC;QACxL,CAAC;QACD,OAAO,IAAI,CAAC;IACd,CAAC;IAED,KAAK,CAAC,eAAe;QACnB,IAAI,IAAI,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,UAAU,EAAE,CAAC;YACjC,IAAI,CAAC,UAAU,GAAG,IAAI,CAAC,GAAG,EAAE,GAAG,CAAC,CAAC,GAAG,EAAE,GAAG,IAAI,CAAC,CAAC;YAC/C,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,aAAa,CAAC,OAAO,EAAE;YAClD,KAAK,MAAM,KAAK,IAAI,OAAO,EAAE,CAAC;gBAC5B,MAAM,wCAAgB,EAAC,GAAG,KAAK,CAAC,IAAI,aAAa,CAAC,CAAC;gBACnD,MAAM,mBAAK,EAAC,IAAI,CAAC,CAAC;YACpB,CAAC;QACH,CAAC;IACH,CAAC;CACF;AAlnBY,gCAAU;qBAAV,UAAU;IADtB,uBAAU,GAAE;qCAMuB,gCAAY;QACnB,mCAAe;QACf,mCAAe;QACjB,iCAAa;QACL,yCAAqB;QAC9B,gCAAY;QACb,+BAAW;QACV,gCAAY;QACN,sCAAkB;QACrB,mCAAe;GAd/B,UAAU,CAknBtB;;;;;;;;;;;ACloBD;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;;;;;ACAA;;;;;;UCAA;UACA;;UAEA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;UACA;;UAEA;UACA;;UAEA;UACA;UACA;;;;;;;;;;;;ACtBA,uEAA2C;AAC3C,mEAAgC;AAChC,oFAAyC;AACzC,gFAAiE;AACjE,6EAAgD;AAEhD,KAAK,UAAU,SAAS;IACtB,MAAM,GAAG,GAAG,MAAM,kBAAW,CAAC,MAAM,CAAC,sBAAS,CAAC,CAAC;IAGhD,GAAG,CAAC,UAAU,CAAC;QACb,MAAM,EAAE,GAAG;QACX,cAAc,EAAE,GAAG;QACnB,OAAO,EAAE,GAAG;KACb,CAAC,CAAC;IAEH,GAAG,CAAC,cAAc,CAAC,IAAI,uBAAc,CAAC;QACpC,SAAS,EAAE,IAAI;KAChB,CAAC,CAAC,CAAC;IAEJ,GAAG,CAAC,GAAG,CAAC,CAAC,GAAG,EAAE,GAAG,EAAE,IAAI,EAAE,EAAE;QACzB,GAAG,CAAC,SAAS,CAAC,eAAe,EAAE,UAAU,CAAC,CAAC;QAC3C,IAAI,EAAE,CAAC;IACT,CAAC,CAAC,CAAC;IAEH,MAAM,MAAM,GAAG,IAAI,yBAAe,EAAE;SACjC,QAAQ,CAAC,wBAAwB,CAAC;SAClC,cAAc,CAAC,mBAAmB,CAAC;SACnC,UAAU,CAAC,KAAK,CAAC;SACjB,KAAK,EAAE,CAAC;IACX,MAAM,QAAQ,GAAG,uBAAa,CAAC,cAAc,CAAC,GAAG,EAAE,MAAM,CAAC,CAAC;IAC3D,uBAAa,CAAC,KAAK,CAAC,KAAK,EAAE,GAAG,EAAE,QAAQ,CAAC,CAAC;IAE1C,kBAAQ,CAAC,GAAG,CAAC,OAAO,EAAE,IAAI,CAAC,CAAC;IAE5B,OAAO,CAAC,EAAE,CAAC,oBAAoB,EAAE,CAAC,MAAM,EAAE,OAAO,EAAE,EAAE;QACnD,OAAO,CAAC,KAAK,CAAC,yBAAyB,EAAE,OAAO,EAAE,SAAS,EAAE,MAAM,CAAC,CAAC;IACvE,CAAC,CAAC,CAAC;IAEH,OAAO,CAAC,EAAE,CAAC,mBAAmB,EAAE,CAAC,MAAM,EAAE,OAAO,EAAE,EAAE;QAClD,OAAO,CAAC,KAAK,CAAC,OAAO,EAAE,MAAM,CAAC,CAAC;IACjC,CAAC,CAAC,CAAC;IAEH,IAAI,cAAc,GAAG,KAAK,CAAC;IAC3B,MAAM,QAAQ,GAAG,KAAK,EAAE,MAAc,EAAE,EAAE;QACxC,IAAI,cAAc;YAAE,OAAO;QAC3B,cAAc,GAAG,IAAI,CAAC;QACtB,OAAO,CAAC,GAAG,CAAC,GAAG,MAAM,WAAW,CAAC,CAAC;QAClC,MAAM,GAAG,CAAC,KAAK,EAAE,CAAC;QAClB,OAAO,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC;IAClB,CAAC,CAAC;IAEF,OAAO,CAAC,EAAE,CAAC,MAAM,EAAE,KAAK,IAAI,EAAE;QAC5B,OAAO,CAAC,GAAG,CAAC,oBAAoB,CAAC,CAAC;IACpC,CAAC,CAAC,CAAC;IAEH,OAAO,CAAC,EAAE,CAAC,QAAQ,EAAE,KAAK,IAAI,EAAE;QAC9B,MAAM,QAAQ,CAAC,QAAQ,CAAC,CAAC;IAC3B,CAAC,CAAC,CAAC;IAEH,OAAO,CAAC,EAAE,CAAC,SAAS,EAAE,KAAK,IAAI,EAAE;QAC/B,MAAM,QAAQ,CAAC,SAAS,CAAC,CAAC;IAC5B,CAAC,CAAC,CAAC;IAEH,OAAO,CAAC,EAAE,CAAC,SAAS,EAAE,KAAK,IAAI,EAAE;QAC/B,MAAM,QAAQ,CAAC,SAAS,CAAC,CAAC;IAC5B,CAAC,CAAC,CAAC;IAEH,MAAM,GAAG,CAAC,IAAI,EAAE,CAAC;IACjB,MAAM,GAAG,CAAC,MAAM,CAAC,OAAO,CAAC,GAAG,CAAC,IAAI,IAAI,IAAI,CAAC,CAAC;AAC7C,CAAC;AACD,SAAS,EAAE,CAAC","sources":[".././src/app.controller.ts",".././src/app.module.ts",".././src/app.service.ts","../external commonjs \"@nestjs/common\"","../external commonjs \"@nestjs/core\"","../external commonjs \"@nestjs/swagger\"","../external commonjs \"common-tg-service\"","../external commonjs \"mongoose\"","../external commonjs \"node-schedule-tz\"","../external commonjs \"telegram/Helpers\"","../external commonjs \"telegram/tl\"","../webpack/bootstrap",".././src/main.ts"],"sourcesContent":["import { Body, Controller, Get, Param, Post, Query, Res, UploadedFile, UseInterceptors } from '@nestjs/common';\r\nimport { AppService } from './app.service';\r\nimport { ApiBody, ApiConsumes, ApiOperation, ApiParam, ApiQuery, ApiResponse } from '@nestjs/swagger';\r\nimport { Response } from 'express';\r\nimport { FileInterceptor } from '@nestjs/platform-express';\r\nimport { existsSync, mkdirSync, promises as fs } from 'fs';\r\nimport { join } from 'path';\r\nimport { diskStorage} from 'multer';\r\nimport { parseError } from 'common-tg-service';\r\n\r\n@Controller()\r\nexport class AppController {\r\n  constructor(private readonly appService: AppService) { }\r\n\r\n  @Get()\r\n  getHello(): string {\r\n    return this.appService.getHello();\r\n  }\r\n\r\n  @Get('processUsers/:limit/:skip')\r\n  async processUsers(\r\n    @Param('limit') limit: number = 30,\r\n    @Param('skip') skip: number = 20) {\r\n    return await this.appService.processUsers(limit, skip)\r\n  }\r\n\r\n  @Get('blockUserAll/:tgId')\r\n  async blockUserAll(@Param('tgId') tgId: string) {\r\n    return await this.appService.blockUserAll(tgId)\r\n  }\r\n\r\n  @Get('unblockUserAll/:tgId')\r\n  async unblockUserAll(@Param('tgId') tgId: string) {\r\n    return await this.appService.unblockUserAll(tgId)\r\n  }\r\n\r\n  @Get('isRecentUser')\r\n  @ApiOperation({ summary: 'Check if user is recent and return access data' })\r\n  @ApiParam({ name: 'chatId', type: 'string', required: true })\r\n  @ApiResponse({ status: 200, description: 'Returns count of recent accesses and video details' })\r\n  async isRecentUser(@Query('chatId') chatId: string) {\r\n    return this.appService.isRecentUser(chatId);\r\n  }\r\n\r\n  @Post('isRecentUser')\r\n  @ApiOperation({ summary: 'Update recent user data' })\r\n  @ApiParam({ name: 'chatId', type: 'string', required: true })\r\n  @ApiBody({ type: Object, description: 'Video details to update', required: true })\r\n  @ApiResponse({ status: 200, description: 'Successfully updated recent user data' })\r\n  async updateRecentUser(@Query('chatId') chatId: string, @Body() videoDetails: any) {\r\n    await this.appService.updateRecentUser(chatId, videoDetails);\r\n    return 'Ok';\r\n  }\r\n\r\n  @Get('resetRecentUser')\r\n  @ApiOperation({ summary: 'Reset recent user data' })\r\n  @ApiParam({ name: 'chatId', type: 'string', required: true })\r\n  @ApiResponse({ status: 200, description: 'Returns count of recent accesses after reset' })\r\n  async resetRecentUser(@Query('chatId') chatId: string) {\r\n    return this.appService.resetRecentUser(chatId);\r\n  }\r\n\r\n  @Get('paymentStats')\r\n  async getPaymentStats(@Query('chatId') chatId: string, @Query('profile') profile: string) {\r\n    return this.appService.getPaymentStats(chatId, profile);\r\n  }\r\n\r\n  @Get('sendToChannel')\r\n  @ApiOperation({ summary: 'Send message to channel' })\r\n  @ApiQuery({ name: 'msg', required: true, description: 'Message to send' })\r\n  @ApiQuery({ name: 'chatId', required: false, description: 'Chat ID of the channel' })\r\n  @ApiQuery({ name: 'token', required: false, description: 'Token for authentication' })\r\n  async sendToChannel(\r\n    @Query('msg') message: string,\r\n    @Query('chatId') chatId: string,\r\n    @Query('token') token: string,\r\n  ) {\r\n    try {\r\n      if (message.length < 1500) {\r\n        return await this.appService.sendToChannel(chatId, token, message);\r\n      } else {\r\n        console.log(\"Skipped Message:\", decodeURIComponent(message))\r\n        return 'sent'\r\n      }\r\n    } catch (e) {\r\n      parseError(e);\r\n    }\r\n  }\r\n\r\n  @Get('sendToAll')\r\n  @ApiOperation({ summary: 'Send Enpoint to all clients' })\r\n  @ApiQuery({ name: 'query', required: true, description: 'Endpoint to send' })\r\n  async sendToAll(@Query('query') query: string) {\r\n    try {\r\n      const decodedEndpoint = decodeURIComponent(query);\r\n      this.appService.sendToAll(decodedEndpoint);\r\n      return `Send ${query}`\r\n    } catch (e) {\r\n      parseError(e);\r\n      throw e;\r\n    }\r\n  }\r\n\r\n  @Get('joinChannelsForClients')\r\n  @ApiOperation({ summary: 'Join Channels for Clients' })\r\n  async joinChannelsforBufferClients(): Promise<string> {\r\n    return this.appService.joinchannelForClients();\r\n  }\r\n\r\n  @Get('refreshmap')\r\n  @ApiOperation({ summary: 'refreshmap for Clients' })\r\n  async refreshmap(): Promise<void> {\r\n    return await this.appService.refreshmap();\r\n  }\r\n\r\n\r\n  @Get('maskedCls')\r\n  @ApiOperation({ summary: 'Cls Data' })\r\n  async maskedCls(@Query() query: object): Promise<any> {\r\n    return await this.appService.findAllMasked(query);\r\n  }\r\n\r\n  @Get('portalData')\r\n  @ApiOperation({ summary: 'Cls Data' })\r\n  async portalData(@Query() query: object): Promise<{ client: any, upis: object }> {\r\n    return await this.appService.portalData(query);\r\n  }\r\n\r\n  @Get('/requestcall')\r\n  @ApiOperation({ summary: 'Request a call' })\r\n  @ApiResponse({ status: 200, description: 'Call request processed successfully.' })\r\n  @ApiQuery({ name: 'username', required: true, description: 'Username' })\r\n  @ApiQuery({ name: 'chatId', required: true, description: 'Chat ID' })\r\n  async requestCall(@Query('username') username: string, @Query('chatId') chatId: string) {\r\n    return await this.appService.getRequestCall(username, chatId);\r\n  }\r\n\r\n  @Get('refreshPrimary')\r\n  @ApiOperation({ summary: 'Exit primary clients' })\r\n  @ApiResponse({ status: 200, description: 'exit Call request processed successfully.' })\r\n  async refreshPrimary() {\r\n    this.appService.refreshPrimary();\r\n    return '1';\r\n  }\r\n  \r\n  @Get('refreshSecondary')\r\n  async refreshSecondary() {\r\n    this.appService.refreshSecondary();\r\n    return '2';\r\n  }\r\n\r\n  @Get('exitPrimary')\r\n  @ApiOperation({ summary: 'Exit primary clients' })\r\n  @ApiResponse({ status: 200, description: 'exit Call request processed successfully.' })\r\n  async exitPrimary() {\r\n    this.appService.exitPrimary();\r\n    return '1';\r\n  }\r\n  \r\n  @Get('exitSecondary')\r\n  async exitSecondary() {\r\n    this.appService.exitSecondary();\r\n    return '2';\r\n  }\r\n\r\n  @Get(\"exit\")\r\n  exit(): string {\r\n    process.exit(1)\r\n  }\r\n\r\n  @Get('/getviddata')\r\n  @ApiOperation({ summary: 'Get video data' })\r\n  @ApiResponse({ status: 200, description: 'Video data retrieved successfully.' })\r\n  @ApiQuery({ name: 'profile', required: false, description: 'Profile' })\r\n  @ApiQuery({ name: 'clientId', required: false, description: 'clientId' })\r\n  @ApiQuery({ name: 'chatId', required: true, description: 'chatId' })\r\n  async getVidData(@Query('profile') profile: string, @Query('clientId') clientId: string, @Query('chatId') chatId: any) {\r\n    return await this.appService.getUserData(profile, clientId, chatId);\r\n  }\r\n\r\n  @Post('/getviddata')\r\n  @ApiOperation({ summary: 'Get video data' })\r\n  @ApiResponse({ status: 200, description: 'Video data retrieved successfully.' })\r\n  @ApiQuery({ name: 'profile', required: false, description: 'Profile' })\r\n  @ApiQuery({ name: 'clientId', required: false, description: 'clientId' })\r\n  @ApiBody({ description: 'Body data', required: true, type: Object })\r\n  async updateVidData(@Query('profile') profile: string, @Query('clientId') clientId: string, @Body() body: any) {\r\n    return await this.appService.updateUserData(profile, clientId, body);\r\n  }\r\n\r\n  @Post('/getUserConfig')\r\n  @ApiOperation({ summary: 'Get user configuration' })\r\n  @ApiResponse({ status: 200, description: 'User configuration updated successfully.' })\r\n  @ApiBody({ description: 'Configuration data', required: true, type: Object })\r\n  async updtaeUserConfig(@Query() filter: any, @Body() data: any) {\r\n    throw new Error(\"Method not implemented\")\r\n    // return await this.appService.updateUserConfig(filter, data);\r\n  }\r\n\r\n  @Get('/getUserConfig')\r\n  @ApiOperation({ summary: 'Get user configuration' })\r\n  @ApiResponse({ status: 200, description: 'User configuration retrieved successfully.' })\r\n  async getUserConfig(@Query() filter: any) {\r\n    return await this.appService.getUserConfig(filter);\r\n  }\r\n\r\n  @Get('/getallupiIds')\r\n  @ApiOperation({ summary: 'Get all UpiIDs' })\r\n  @ApiResponse({ status: 200, description: 'All upi Ids retrieved successfully.' })\r\n  async getallupiIds() {\r\n    return await this.appService.getallupiIds();\r\n  }\r\n\r\n  @Post('/updateUserData/:chatId')\r\n  @ApiOperation({ summary: 'Get user configuration' })\r\n  @ApiResponse({ status: 200, description: 'User configuration updated successfully.' })\r\n  @ApiQuery({ name: 'profile', required: false, description: 'Profile' })\r\n  @ApiBody({ description: 'user data', required: true, type: Object })\r\n  async updateUserConfig(@Param('chatId') chatId: string, @Query('profile') profile: string, @Body() data: any) {\r\n    return await this.appService.updateUserConfig(chatId, profile, data);\r\n  }\r\n  @Get('/getUserInfo')\r\n  @ApiOperation({ summary: 'Get user information' })\r\n  @ApiResponse({ status: 200, description: 'User information retrieved successfully.' })\r\n  async getUserInfo(@Query() filter: any) {\r\n    return await this.appService.getUserInfo(filter);\r\n  }\r\n\r\n  @Get('getdata')\r\n  @ApiOperation({ summary: 'Get data and refresh periodically' })\r\n  @ApiResponse({ status: 200, description: 'Successful operation' })\r\n  async getData(@Res() res: Response): Promise<void> {\r\n    this.appService.checkAndRefresh();\r\n\r\n    res.setHeader('Content-Type', 'text/html');\r\n    let resp = '<html><head></head><body>';\r\n    resp += await this.appService.getData();\r\n    resp += '</body></html>';\r\n    resp += `<script>\r\n                console.log(\"hi\");\r\n                setInterval(() => {\r\n                  window.location.reload();\r\n                }, 20000);\r\n            </script>`;\r\n    res.send(resp);\r\n  }\r\n}\r\n","import { forwardRef, MiddlewareConsumer, Module, NestModule } from '@nestjs/common';\r\nimport { AppController } from './app.controller';\r\nimport { AppService } from './app.service';\r\nimport {\r\n  BuildModule, UsersModule, TelegramModule,\r\n  UserDataModule, ClientModule, ActiveChannelsModule,\r\n  UpiIdModule, StatModule, Stat2Module, PromoteStatModule,\r\n  ChannelsModule, TgSignupModule, LoggerMiddleware,TimestampModule\r\n} from 'common-tg-service';\r\n\r\n\r\n@Module({\r\n  imports: [\r\n    forwardRef(() => BuildModule), forwardRef(() => UsersModule), forwardRef(() => TelegramModule),\r\n    forwardRef(() => UserDataModule), forwardRef(() => ClientModule),\r\n    forwardRef(() => ActiveChannelsModule), forwardRef(() => UpiIdModule),\r\n    forwardRef(() => StatModule), forwardRef(() => Stat2Module), forwardRef(() => PromoteStatModule),\r\n    forwardRef(() => ChannelsModule), forwardRef(() => TgSignupModule)],\r\n    // forwardRef(() => TimestampModule)],\r\n  controllers: [AppController],\r\n  providers: [AppService],\r\n})\r\nexport class AppModule implements NestModule {\r\n  configure(consumer: MiddlewareConsumer) {\r\n    consumer.apply(LoggerMiddleware).forRoutes('*');\r\n  }\r\n}","import { Injectable, OnModuleInit } from '@nestjs/common';\r\nimport { sleep, TotalList } from 'telegram/Helpers';\r\nimport { Api } from 'telegram/tl';\r\nimport { Dialog } from 'telegram/tl/custom/dialog';\r\nimport * as schedule from 'node-schedule-tz'\r\nimport {\r\n  UsersService,\r\n  TelegramService, UserDataService,\r\n  ClientService, ActiveChannelsService,\r\n  UpiIdService, StatService, Stat2Service,\r\n  PromoteStatService, ChannelsService,\r\n  fetchWithTimeout, ppplbot, parseError,\r\n  User, TelegramManager, CreateChannelDto,\r\n  Channel, connectionManager\r\n} from 'common-tg-service';\r\n@Injectable()\r\nexport class AppService implements OnModuleInit {\r\n  private userAccessData: Map<string, { timestamps: number[], videoDetails: any }> = new Map();\r\n  private joinChannelIntervalId: NodeJS.Timeout;\r\n  private joinChannelMap: Map<string, Channel[]> = new Map();\r\n\r\n  constructor(private usersService: UsersService,\r\n    private telegramService: TelegramService,\r\n    private userDataService: UserDataService,\r\n    private clientService: ClientService,\r\n    private activeChannelsService: ActiveChannelsService,\r\n    private upiIdService: UpiIdService,\r\n    private statService: StatService,\r\n    private stat2Service: Stat2Service,\r\n    private promoteStatService: PromoteStatService,\r\n    private channelsService: ChannelsService,\r\n  ) {\r\n    console.log(\"App Module Constructor initiated !!\");\r\n  }\r\n  private refresTime: number = 0;\r\n\r\n  onModuleInit() {\r\n    console.log(\"App Module initiated !!\");\r\n    try {\r\n      schedule.scheduleJob('test3', '25 2,9,16 * * * ', 'Asia/Kolkata', async () => {\r\n        await fetchWithTimeout(`${(ppplbot())}&text=ExecutingjoinchannelForClients-${process.env.clientId}`)\r\n        const now = new Date();\r\n        if (now.getUTCDate() % 3 === 1) {\r\n          this.leaveChannelsAll()\r\n        } else {\r\n          await this.joinchannelForClients()\r\n        }\r\n      })\r\n\r\n      // schedule.scheduleJob('test3', '0 * * * * ', 'Asia/Kolkata', async () => {\r\n      //   await this.clientService.refreshMap();\r\n      //   this.processUsers(400, 0);\r\n      //   await this.statService.deleteAll();\r\n      // })\r\n\r\n      // schedule.scheduleJob('test3', '25 2,9 * * * ', 'Asia/Kolkata', async () => {\r\n      //   const now = new Date();\r\n      //   if (now.getUTCDate() % 3 === 1) {\r\n      //     this.leaveChannelsAll()\r\n      //   }\r\n      //   await this.joinchannelForClients()\r\n      // })\r\n\r\n      // schedule.scheduleJob('test3', ' 25 0 * * * ', 'Asia/Kolkata', async () => {\r\n      //   const now = new Date();\r\n      //   if (now.getUTCDate() % 9 === 1) {\r\n      //     setTimeout(async () => {\r\n      //       await this.activeChannelsService.resetAvailableMsgs();\r\n      //       await this.activeChannelsService.updateBannedChannels();\r\n      //       await this.activeChannelsService.updateDefaultReactions();\r\n      //     }, 30000);\r\n      //   }\r\n\r\n      //   await fetchWithTimeout(`${ppplbot()}&text=${encodeURIComponent(await this.getPromotionStatsPlain())}`);\r\n      //   await this.userDataService.resetPaidUsers();\r\n      //   await this.statService.deleteAll();\r\n      //   await this.stat2Service.deleteAll();\r\n      //   await this.promoteStatService.reinitPromoteStats();\r\n      // })\r\n      // this.checkPromotions();\r\n      console.log(\"Added All Cron Jobs\")\r\n    } catch (error) {\r\n      console.log(\"Some Error: \", error);\r\n    }\r\n  }\r\n  async checkPromotions() {\r\n    setInterval(async () => {\r\n      const clients = await this.clientService.findAll();\r\n      for (const client of clients) {\r\n        const userPromoteStats = await this.promoteStatService.findByClient(client.clientId);\r\n        if (userPromoteStats?.isActive && (Date.now() - userPromoteStats?.lastUpdatedTimeStamp) / (1000 * 60) > 6) {\r\n          try {\r\n            await fetchWithTimeout(`${client.repl}/promote`, { timeout: 120000 });\r\n            console.log(client.clientId, \": Promote Triggered!!\");\r\n          } catch (error) {\r\n            parseError(error, \"Promotion Check Err\")\r\n          }\r\n        } else {\r\n          console.log(client.clientId, \": ALL Good!! ---\", Math.floor((Date.now() - userPromoteStats?.lastUpdatedTimeStamp) / (1000 * 60)));\r\n        }\r\n      }\r\n    }, 240000)\r\n  }\r\n\r\n  async getPromotionStatsPlain() {\r\n    let resp = '';\r\n    const result = await this.promoteStatService.findAll();\r\n    for (const data of result) {\r\n      resp += `\\n${data.client.toUpperCase()} : ${data.totalCount} ${data.totalCount > 0 ? ` | ${Number((Date.now() - data.lastUpdatedTimeStamp) / (1000 * 60)).toFixed(2)}` : ''}`;\r\n    }\r\n    return resp;\r\n  }\r\n\r\n  async leaveChannelsAll() {\r\n    await this.sendToAll('leavechannels')\r\n  }\r\n\r\n  async sendToAll(endpoint: string) {\r\n    const clients = await this.clientService.findAll();\r\n    for (const client of clients) {\r\n      const url = `${client.repl}/${endpoint}`\r\n      console.log(\"Trying : \", url)\r\n      fetchWithTimeout(url);\r\n      await sleep(2000);\r\n    }\r\n  }\r\n\r\n  public async exitPrimary() {\r\n    const clients = await this.clientService.findAll();\r\n    for (const client of clients) {\r\n      if (client.clientId.toLowerCase().includes('1')) {\r\n        await fetchWithTimeout(`${client.repl}/exit`);\r\n        await sleep(40000);\r\n      }\r\n    }\r\n  }\r\n\r\n  public async exitSecondary() {\r\n    const clients = await this.clientService.findAll();\r\n    for (const client of clients) {\r\n      if (client.clientId.toLowerCase().includes('2')) {\r\n        await fetchWithTimeout(`${client.repl}/exit`);\r\n        await sleep(40000);\r\n      }\r\n    }\r\n  }\r\n\r\n  public async refreshPrimary() {\r\n    const clients = await this.clientService.findAll();\r\n    for (const client of clients) {\r\n      if (client.clientId.toLowerCase().includes('1')) {\r\n        await fetchWithTimeout(`${client.repl}/exec/refresh`);\r\n        await sleep(40000);\r\n      }\r\n    }\r\n  }\r\n\r\n  public async refreshSecondary() {\r\n    const clients = await this.clientService.findAll();\r\n    for (const client of clients) {\r\n      if (client.clientId.toLowerCase().includes('2')) {\r\n        await fetchWithTimeout(`${client.repl}/exec/refresh`);\r\n        await sleep(40000);\r\n      }\r\n    }\r\n  }\r\n\r\n  async processUsers(limit?: number, skip?: number) {\r\n    const users = await this.getUser(limit, skip);\r\n    this.updateUsers(users);\r\n    return \"Initiated Users Update\"\r\n  }\r\n\r\n  async updateUsers(users: User[]) {\r\n    for (const user of users) {\r\n      try {\r\n        const telegramClient = await connectionManager.getClient(user.mobile, { autoDisconnect: false, handler: false });\r\n        const lastActive = await telegramClient.getLastActiveTime();\r\n        const me = await telegramClient.getMe()\r\n        const selfMSgInfo = await telegramClient.getSelfMSgsInfo();\r\n        const dialogs = await telegramClient.getDialogs({ limit: 500 });\r\n        const contacts = <Api.contacts.Contacts>await telegramClient.getContacts()\r\n        const callsInfo = await telegramClient.getCallLog();\r\n        const recentUsers = await this.processChannels(dialogs, telegramClient)\r\n        await this.usersService.update(user.tgId, {\r\n          contacts: contacts.savedCount,\r\n          calls: callsInfo?.totalCalls > 0 ? callsInfo : { chatCallCounts: [], incoming: 0, outgoing: 0, totalCalls: 0, video: 0 },\r\n          firstName: me.firstName,\r\n          lastName: me.lastName, username: me.username, msgs: selfMSgInfo.total, totalChats: dialogs.total,\r\n          lastActive, tgId: me.id.toString(),\r\n          recentUsers\r\n        })\r\n        await connectionManager.unregisterClient(user.mobile);\r\n      } catch (error) {\r\n        parseError(error, \"UMS :: \")\r\n      }\r\n    }\r\n  }\r\n\r\n  async processChannels(dialogs: TotalList<Dialog>, telegramClient: TelegramManager) {\r\n    const recentUsers = []\r\n    for (const chat of dialogs) {\r\n      try {\r\n        if (chat.isChannel || chat.isGroup) {\r\n          const chatEntity = <Api.Channel>chat.entity;\r\n          const cannotSendMsgs = chatEntity.defaultBannedRights?.sendMessages;\r\n          if (!chatEntity.broadcast && !cannotSendMsgs && chatEntity.participantsCount > 50) {\r\n            const channel: CreateChannelDto = {\r\n              channelId: chatEntity.id.toString(),\r\n              canSendMsgs: true,\r\n              participantsCount: chatEntity.participantsCount,\r\n              private: false,\r\n              title: chatEntity.title,\r\n              broadcast: chatEntity.broadcast,\r\n              megagroup: chatEntity.megagroup,\r\n              restricted: chatEntity.restricted,\r\n              sendMessages: true,\r\n              username: chatEntity.username,\r\n              forbidden: false\r\n            }\r\n            this.channelsService.update(channel.channelId, channel)\r\n          }\r\n        } else {\r\n          const msgs = await telegramClient.getMessages(chat.id);\r\n          if (msgs.total > 1000) {\r\n            for (const message of msgs) {\r\n              let video = 0;\r\n              let photo = 0\r\n              if (message.media instanceof Api.MessageMediaPhoto) {\r\n                photo++\r\n              } else if (message.media instanceof Api.MessageMediaDocument && (message.document?.mimeType?.startsWith('video') || message.document?.mimeType?.startsWith('image'))) {\r\n                video++\r\n              }\r\n              recentUsers.push({\r\n                total: msgs.total,\r\n                video,\r\n                photo,\r\n                chatId: chat.id.toString(),\r\n              })\r\n            }\r\n          }\r\n        }\r\n        return recentUsers;\r\n      } catch (error) {\r\n        parseError(error)\r\n      }\r\n    }\r\n  }\r\n\r\n\r\n  async getUser(limit?: number, skip?: number) {\r\n    var currentDate = new Date();\r\n\r\n    var weekAgoDate = new Date(currentDate);\r\n    weekAgoDate.setDate(currentDate.getDate() - 7);\r\n\r\n    var monthAgoDate = new Date(currentDate);\r\n    monthAgoDate.setDate(currentDate.getDate() - 30);\r\n\r\n    var threeMonthAgoDate = new Date(currentDate);\r\n    threeMonthAgoDate.setDate(currentDate.getDate() - 90);\r\n\r\n    var query = {\r\n      $or: [\r\n        { createdAt: { $gt: monthAgoDate }, updatedAt: { $lt: weekAgoDate } },\r\n        { createdAt: { $lte: monthAgoDate, $gt: threeMonthAgoDate }, updatedAt: { $lt: monthAgoDate } },\r\n        { createdAt: { $lte: threeMonthAgoDate }, updatedAt: { $lte: threeMonthAgoDate } }\r\n      ]\r\n    };\r\n    const users = await this.usersService.executeQuery(query, {}, limit || 300, skip || 0)\r\n    return users;\r\n  }\r\n  getHello(): string {\r\n    return 'Hello World!';\r\n  }\r\n\r\n  async isRecentUser(chatId: string): Promise<{ count: number, videoDetails: any }> {\r\n    const accessData = this.userAccessData.get(chatId) || { timestamps: [], videoDetails: {} };\r\n    const currentTime = Date.now();\r\n    const recentAccessData = accessData.timestamps.filter(timestamp => currentTime - timestamp <= 15 * 60 * 1000);\r\n    recentAccessData.push(currentTime);\r\n    this.userAccessData.set(chatId, { videoDetails: accessData.videoDetails, timestamps: recentAccessData });\r\n    const result = { count: recentAccessData.length, videoDetails: accessData.videoDetails }\r\n    console.log(result)\r\n    return result;\r\n  }\r\n\r\n  async updateRecentUser(chatId: string, videoDetails: any): Promise<void> {\r\n    const accessData = this.userAccessData.get(chatId) || { timestamps: [], videoDetails: {} };\r\n    const updatedVideoDetails = { ...accessData.videoDetails, ...videoDetails };\r\n    console.log({ videoDetails: updatedVideoDetails, timestamps: accessData.timestamps })\r\n    this.userAccessData.set(chatId, { videoDetails: updatedVideoDetails, timestamps: accessData.timestamps });\r\n  }\r\n\r\n  async resetRecentUser(chatId: string): Promise<{ count: number }> {\r\n    this.userAccessData.delete(chatId);\r\n    return { count: 0 };\r\n  }\r\n\r\n  async getPaymentStats(chatId: string, profile: string) {\r\n    const resp = { paid: 0, demoGiven: 0, secondShow: 0, fullShow: 0, latestCallTime: 0, videos: [] };\r\n    const threeDaysAgo = Date.now() - (3 * 24 * 60 * 60 * 1000);\r\n    const fiveDaysAgo = Date.now() - (5 * 24 * 60 * 60 * 1000);\r\n\r\n    try {\r\n      const query1 = { chatId, profile: { $exists: true, $ne: profile }, payAmount: { $gte: 10 } };\r\n      const query2 = { chatId, profile: { $exists: true, $ne: profile } };\r\n\r\n      const document = await this.userDataService.executeQuery(query1);\r\n      const document2 = await this.userDataService.executeQuery(query2);\r\n\r\n      if (document.length > 0) {\r\n        resp.paid = document.length;\r\n      }\r\n\r\n      if (document2.length > 0) {\r\n        for (const doc of document2) {\r\n          if (doc.callTime > threeDaysAgo) {\r\n            if (doc.demoGiven) {\r\n              resp.demoGiven++;\r\n            }\r\n            if (doc.secondShow) {\r\n              resp.secondShow++;\r\n            }\r\n            if (doc.fullShow) {\r\n              resp.fullShow++;\r\n            }\r\n            if (doc.callTime > resp.latestCallTime) {\r\n              resp.latestCallTime = doc.callTime;\r\n            }\r\n            resp.videos.push(...doc.videos);\r\n          } else {\r\n            if (doc.lastMsgTimeStamp > fiveDaysAgo) {\r\n              await this.userDataService.update(doc.profile, doc.chatId, { payAmount: 0, videos: [], demoGiven: false, secondShow: false, highestPayAmount: 0, });\r\n            }\r\n          }\r\n        }\r\n      }\r\n    } catch (error) {\r\n      parseError(error);\r\n    }\r\n    console.log(resp);\r\n    return resp;\r\n  }\r\n\r\n  async sendToChannel(chatId: string, token: string, message: string) {\r\n    function decodeIfEncoded(str: string): string {\r\n      try {\r\n        return str !== decodeURIComponent(str) ? decodeURIComponent(str) : str;\r\n      } catch (e) {\r\n        return str;\r\n      }\r\n    }\r\n    function escapeMarkdownV2(text: string): string {\r\n      text = text.replace(/([\\\\_`\\[\\]()~>`#+\\-=|{}.!])/g, '\\\\$1');\r\n      return text;\r\n    }\r\n    const decodedMessage = decodeIfEncoded(message);\r\n    console.log('Decoded Message:', decodedMessage);\r\n    const escapedMessage = escapeMarkdownV2(decodedMessage);\r\n    console.log('Escaped Message:', escapedMessage);\r\n    const encodedMessage = encodeURIComponent(escapedMessage).replace(/%5Cn/g, \"%0A\");\r\n    console.log('Encoded Message:', encodedMessage);\r\n    const url = `${ppplbot(chatId, token)}&parse_mode=MarkdownV2&text=${encodedMessage}`;\r\n    return (await fetchWithTimeout(url, {}, 0))?.data;\r\n  }\r\n\r\n  async findAllMasked(query: object) {\r\n    return await this.clientService.findAllMasked(query)\r\n  }\r\n  async portalData(query: object) {\r\n    const client = (await this.clientService.findAllMasked(query))[0];\r\n    const upis = await this.upiIdService.findOne();\r\n    return { client, upis }\r\n  }\r\n  async joinchannelForClients(): Promise<string> {\r\n    console.log(\"Joining Channel Started\")\r\n    await connectionManager.disconnectAll();\r\n    await sleep(2000);\r\n    const clients = await this.clientService.findAll();\r\n    clients.map(async (document) => {\r\n      try {\r\n        let resp = await fetchWithTimeout(`${document.repl}/channelinfo`, { timeout: 200000 }, 1);\r\n        await fetchWithTimeout(`${(ppplbot())}&text=Channel SendTrue :: ${document.clientId}: ${resp.data.canSendTrueCount}`)\r\n        if (resp?.data?.canSendTrueCount && resp?.data?.canSendTrueCount < 350) {\r\n          const result = await this.activeChannelsService.getActiveChannels(150, 0, resp.data?.ids);\r\n          await fetchWithTimeout(`${(ppplbot())}&text=Started Joining Channels for ${document.clientId}: ${result.length}`)\r\n          this.joinChannelMap.set(document.repl, result);\r\n        }\r\n      } catch (error) {\r\n        parseError(error)\r\n      }\r\n    })\r\n    this.joinChannelQueue();\r\n    console.log(\"Joining Channel Triggered Succesfully for \", clients.length);\r\n    return \"Initiated Joining channels\"\r\n  }\r\n\r\n  async joinChannelQueue() {\r\n    this.joinChannelIntervalId = setInterval(async () => {\r\n      const keys = Array.from(this.joinChannelMap.keys());\r\n      if (keys.length > 0) {\r\n        console.log(\"In JOIN CHANNEL interval: \", new Date().toISOString());\r\n        const promises = keys.map(async url => {\r\n          const channels = this.joinChannelMap.get(url);\r\n          if (channels && channels.length > 0) {\r\n            const channel = channels.shift();\r\n            console.log(url, \" Pending Channels :\", channels.length)\r\n            this.joinChannelMap.set(url, channels);\r\n            try {\r\n              await fetchWithTimeout(`${url}/joinchannel?username=${channel.username}`);\r\n              console.log(url, \" Trying to join :\", channel.username);\r\n            } catch (error) {\r\n              parseError(error, \"Outer Err: \");\r\n            }\r\n          } else {\r\n            this.joinChannelMap.delete(url);\r\n          }\r\n        });\r\n        await Promise.all(promises);\r\n      } else {\r\n        this.clearJoinChannelInterval()\r\n      }\r\n    }, 3 * 60 * 1000);\r\n  }\r\n\r\n  clearJoinChannelInterval() {\r\n    if (this.joinChannelIntervalId) {\r\n      console.log(\"Cleared joinChannel Set Interval\")\r\n      clearInterval(this.joinChannelIntervalId);\r\n      this.joinChannelIntervalId = null;\r\n    }\r\n  }\r\n\r\n  async refreshmap() {\r\n    await this.clientService.refreshMap()\r\n    await this.clientService.checkNpoint();\r\n  }\r\n\r\n  async blockUserAll(chatId: string) {\r\n    let profileData = ''\r\n    const userDatas = await this.userDataService.search({ chatId });\r\n    for (const userData of userDatas) {\r\n      const profileRegex = new RegExp(userData.profile, \"i\")\r\n      const profiles = await this.clientService.executeQuery({ clientId: { $regex: profileRegex } })\r\n      for (const profile of profiles) {\r\n        const url = `${profile.repl}/blockuser/${chatId}`;\r\n        console.log(\"Executing: \", url)\r\n        const result = await fetchWithTimeout(url);\r\n        console.log(result.data)\r\n      }\r\n      profileData = profileData + \" | \" + userData.profile;\r\n    }\r\n    return profileData\r\n  }\r\n\r\n  async unblockUserAll(chatId: string) {\r\n    let profileData = ''\r\n    const userDatas = await this.userDataService.search({ chatId });\r\n    for (const userData of userDatas) {\r\n      const profileRegex = new RegExp(userData.profile, \"i\")\r\n      const profiles = await this.clientService.executeQuery({ clientId: { $regex: profileRegex } })\r\n      for (const profile of profiles) {\r\n        const url = `${profile.repl}/unblockuser/${chatId}`;\r\n        console.log(\"Executing: \", url)\r\n        const result = await fetchWithTimeout(url);\r\n        console.log(result.data)\r\n      }\r\n      profileData = profileData + \" | \" + userData.profile;\r\n    }\r\n    return profileData\r\n  }\r\n\r\n  async getRequestCall(username: string, chatId: string): Promise<any> {\r\n    const user = (await this.clientService.search({ username: username.toLowerCase() }))[0];\r\n    console.log(`Call Request Recived: ${username} | ${chatId}`)\r\n    if (user) {\r\n      const payload = { chatId, profile: user.clientId }\r\n      const options = {\r\n        method: 'POST',\r\n        headers: { 'Content-Type': 'application/json' },\r\n        data: JSON.stringify(payload),\r\n      };\r\n      const result = await fetchWithTimeout(\"https://arpithared.onrender.com/events/schedule\", options, 3);\r\n      console.log(result?.data)\r\n    }\r\n  }\r\n\r\n  async getUserData(profile: string, clientId: string, chatId: string): Promise<any> {\r\n    if (!profile) {\r\n      profile = clientId?.replace(/\\d/g, '')\r\n    }\r\n    return await this.userDataService.findOne(profile, chatId);\r\n  }\r\n\r\n  async updateUserData(profile: string, clientId: string, body: any): Promise<any> {\r\n    if (!profile) {\r\n      profile = clientId?.replace(/\\d/g, '')\r\n    }\r\n    const chatId = body.chatId;\r\n    return await this.userDataService.update(profile, chatId, body);\r\n  }\r\n\r\n  async updateUserConfig(chatId: string, profile: string, data: any): Promise<any> {\r\n    this.userDataService.update(profile, chatId, data)\r\n  }\r\n\r\n  async getUserConfig(filter: any): Promise<any> {\r\n    // Implement your logic here\r\n  }\r\n\r\n  async getallupiIds() {\r\n    return await this.upiIdService.findOne();\r\n  }\r\n\r\n  async getUserInfo(filter: any): Promise<any> {\r\n    const client = <any>(await this.clientService.executeQuery(filter,))[0]\r\n    const result = { ...(client._doc ? client._doc : client) }\r\n    delete result['session'];\r\n    delete result['mobile'];\r\n    delete result['deployKey'];\r\n    delete result['promoteMobile'];\r\n    return result\r\n  }\r\n\r\n  extractNumberFromString(inputString) {\r\n    const regexPattern = /\\d+/;\r\n    const matchResult = inputString?.match(regexPattern);\r\n    if (matchResult && matchResult.length > 0) {\r\n      // Parse the matched string into a number and return it\r\n      return parseInt(matchResult[0], 10);\r\n    }\r\n    // If no number is found, return null\r\n    return null;\r\n  }\r\n\r\n  async createInitializedObject() {\r\n    const clients = await this.clientService.findAll();\r\n    const initializedObject = {};\r\n    for (const user of clients) {\r\n      if (this.extractNumberFromString(user.clientId))\r\n        initializedObject[user.clientId.toUpperCase()] = {\r\n          profile: user.clientId.toUpperCase(),\r\n          totalCount: 0,\r\n          totalPaid: 0,\r\n          totalOldPaid: 0,\r\n          oldPaidDemo: 0,\r\n          totalpendingDemos: 0,\r\n          oldPendingDemos: 0,\r\n          totalNew: 0,\r\n          totalNewPaid: 0,\r\n          newPaidDemo: 0,\r\n          newPendingDemos: 0,\r\n          names: \"\",\r\n          fullShowPPl: 0,\r\n          fullShowNames: \"\"\r\n        }\r\n    }\r\n\r\n    return initializedObject;\r\n  }\r\n\r\n  async getData(): Promise<string> {\r\n    const profileData = await this.createInitializedObject();\r\n    const stats = await this.statService.findAll();\r\n    for (const stat of stats) {\r\n      const { count, newUser, payAmount, demoGivenToday, demoGiven, profile, client, name, secondShow } = stat;\r\n\r\n      if (client && profileData[client.toUpperCase()]) {\r\n        const userData = profileData[client.toUpperCase()];\r\n        userData.totalCount += count;\r\n        userData.totalPaid += payAmount > 0 ? 1 : 0;\r\n        userData.totalOldPaid += (payAmount > 0 && !newUser) ? 1 : 0;\r\n        userData.oldPaidDemo += (demoGivenToday && !newUser) ? 1 : 0;\r\n        userData.totalpendingDemos += (payAmount > 25 && !demoGiven) ? 1 : 0;\r\n        userData.oldPendingDemos += (payAmount > 25 && !demoGiven && !newUser) ? 1 : 0;\r\n        if (payAmount > 25 && !demoGiven) {\r\n          userData.names = userData.names + ` ${name} |`;\r\n        }\r\n\r\n        if (demoGiven && ((payAmount > 90 && !secondShow) || (payAmount > 150 && secondShow))) {\r\n          userData.fullShowPPl++;\r\n          userData.fullShowNames = userData.fullShowNames + ` ${name} |`;\r\n        }\r\n\r\n        if (newUser) {\r\n          userData.totalNew += 1;\r\n          userData.totalNewPaid += payAmount > 0 ? 1 : 0;\r\n          userData.newPaidDemo += demoGivenToday ? 1 : 0;\r\n          userData.newPendingDemos += (payAmount > 25 && !demoGiven) ? 1 : 0;\r\n        }\r\n      }\r\n    }\r\n\r\n    const profileDataArray = Object.entries(profileData);\r\n    profileDataArray.sort((a: any, b: any) => b[1].totalpendingDemos - a[1].totalpendingDemos);\r\n    let reply = '';\r\n    for (const [profile, userData] of profileDataArray) {\r\n      reply += `${profile.toUpperCase()} : <b>${(userData as any).totalpendingDemos}</b> | ${(userData as any).names}<br>`;\r\n    }\r\n\r\n    profileDataArray.sort((a: any, b: any) => b[1].fullShowPPl - a[1].fullShowPPl);\r\n    let reply2 = '';\r\n    for (const [profile, userData] of profileDataArray) {\r\n      reply2 += `${profile.toUpperCase()} : <b>${(userData as any).fullShowPPl}</b> |${(userData as any).fullShowNames}<br>`;\r\n    }\r\n\r\n    const reply3 = await this.getPromotionStats();\r\n    console.log(reply3)\r\n\r\n    return (\r\n      `<div>\r\n        <div style=\"display: flex; margin-bottom: 60px\">\r\n          <div style=\"flex: 1;\">${reply} </div>\r\n      < div style = \"flex: 1; \" > ${reply2} </div>\r\n        </div>\r\n        < div style = \"display: flex;\" >\r\n          <div style=\"flex: 1; \" > ${reply3} </div>\r\n            </div>\r\n            </div>`\r\n    );\r\n  }\r\n\r\n  async getPromotionStats(): Promise<string> {\r\n    let resp = '';\r\n    const result = await this.promoteStatService.findAll();\r\n    for (const data of result) {\r\n      resp += `${data.client.toUpperCase()} : <b>${data.totalCount}</b>${data.totalCount > 0 ? ` | ${Number((Date.now() - data.lastUpdatedTimeStamp) / (1000 * 60)).toFixed(2)}` : ''}<br>`;\r\n    }\r\n    return resp;\r\n  }\r\n\r\n  async checkAndRefresh() {\r\n    if (Date.now() > this.refresTime) {\r\n      this.refresTime = Date.now() + (5 * 60 * 1000);\r\n      const clients = await this.clientService.findAll()\r\n      for (const value of clients) {\r\n        await fetchWithTimeout(`${value.repl}/markasread`);\r\n        await sleep(3000);\r\n      }\r\n    }\r\n  }\r\n}\r\n","module.exports = require(\"@nestjs/common\");","module.exports = require(\"@nestjs/core\");","module.exports = require(\"@nestjs/swagger\");","module.exports = require(\"common-tg-service\");","module.exports = require(\"mongoose\");","module.exports = require(\"node-schedule-tz\");","module.exports = require(\"telegram/Helpers\");","module.exports = require(\"telegram/tl\");","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","import { NestFactory } from '@nestjs/core';\r\nimport mongoose from 'mongoose';\r\nimport { AppModule } from './app.module';\r\nimport { DocumentBuilder, SwaggerModule } from '@nestjs/swagger';\r\nimport { ValidationPipe } from '@nestjs/common';\r\n\r\nasync function bootstrap() {\r\n  const app = await NestFactory.create(AppModule);\r\n\r\n  // Enable CORS with all origins allowed\r\n  app.enableCors({\r\n    origin: '*',\r\n    allowedHeaders: '*',\r\n    methods: '*',\r\n  });\r\n\r\n  app.useGlobalPipes(new ValidationPipe({\r\n    transform: true,\r\n  }));\r\n\r\n  app.use((req, res, next) => {\r\n    res.setHeader('Cache-Control', 'no-store');\r\n    next();\r\n  });\r\n\r\n  const config = new DocumentBuilder()\r\n    .setTitle('NestJS and Express API')\r\n    .setDescription('API documentation')\r\n    .setVersion('1.0')\r\n    .build();\r\n  const document = SwaggerModule.createDocument(app, config);\r\n  SwaggerModule.setup('api', app, document);\r\n\r\n  mongoose.set('debug', true);\r\n\r\n  process.on('unhandledRejection', (reason, promise) => {\r\n    console.error('Unhandled Rejection at:', promise, 'reason:', reason);\r\n  });\r\n\r\n  process.on('uncaughtException', (reason, promise) => {\r\n    console.error(promise, reason);\r\n  });\r\n\r\n  let isShuttingDown = false;\r\n  const shutdown = async (signal: string) => {\r\n    if (isShuttingDown) return;\r\n    isShuttingDown = true;\r\n    console.log(`${signal} received`);\r\n    await app.close();\r\n    process.exit(0);\r\n  };\r\n\r\n  process.on('exit', async () => {\r\n    console.log('Application closed');\r\n  });\r\n\r\n  process.on('SIGINT', async () => {\r\n    await shutdown('SIGINT');\r\n  });\r\n\r\n  process.on('SIGTERM', async () => {\r\n    await shutdown('SIGTERM');\r\n  });\r\n\r\n  process.on('SIGQUIT', async () => {\r\n    await shutdown('SIGQUIT');\r\n  });\r\n\r\n  await app.init();\r\n  await app.listen(process.env.PORT || 9000);\r\n}\r\nbootstrap();\r\n"],"names":[],"sourceRoot":""}